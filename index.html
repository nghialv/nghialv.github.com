
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>nghialv blog</title>
  <meta name="author" content="nghialv">

  
  <meta name="description" content="Đối với các ngôn ngữ lập trình hàm như Haskell thì lazy evaluation dường như rất phổ biến. Nhưng đối với các lập trình viên iOS, hay lập trình viên &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://nghialv.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/javascripts/libs/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="nghialv blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script src="/javascripts/libs/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-43205514-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>



  <script type='text/javascript'>
    $(document).ready(function () {
      $('.carousel').carousel({
        interval: 3000
      });
      $('.carousel').carousel('cycle');
    });
  </script>
</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">nghialv blog</a></h1>
  
    <h2>practice makes perfect</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
    
    
    <li><a href="https://github.com/nghialv" rel="subscribe-github" title="@nghialv on GitHub">GitHub</a></li>
    
    
    
    <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:nghialv.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
    
    <article>
      
        
  <header>
    
      <h1 class="entry-title vn-title"><a href="/blog/2015/04/19/lazy-evaluation-in-swift/">Lazy Evaluation in Swift</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-04-19T17:24:46+09:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:24 pm</span></time>
        
         | <a href="/blog/2015/04/19/lazy-evaluation-in-swift/#disqus_thread"
             + data-disqus-identifier="http://nghialv.github.io/blog/2015/04/19/lazy-evaluation-in-swift/">Comments</a>
        
      </p>
    
  </header>



  <div class="entry-content"><p>Đối với các ngôn ngữ lập trình hàm như Haskell thì lazy evaluation dường như rất phổ biến. Nhưng đối với các lập trình viên iOS, hay lập trình viên sử dụng một số ngôn ngữ khác chúng ta lại ít chú ý đến. Khi sử dụng Swift mình thấy Swift cũng hỗ trợ khá nhiều về <code>lazy evaluation</code> không hẳn chỉ là <code>lazy property</code>. Thế nhưng có lẽ do tài liệu về Swift chưa được nhiều hoặc ít chú ý đến <code>lazy evaluation</code> nên có thể chúng ta chưa áp dụng nhiều. Vậy nên bài viết này sẽ tập trung nói về các chiến lược lazy evaluation của Swift. Bài viết sẽ đi qua từng <code>evaluation strategy</code>, và mỗi strategy sẽ cố gắng tập hợp nhiều ví dụ khác nhau để chúng ta hiểu rõ và dễ áp dụng sau này.</p>

<p>Đầu tiên hãy cùng xem qua định nghĩa về <code>evaluation strategy</code> từ Wikipedia:</p>

<p align="center">
<img style="-webkit-user-select: none;" src="https://qiita-image-store.s3.amazonaws.com/0/18907/cd13467a-b136-402c-6cbc-704881b0cbff.png" height="120">
</p>


<p>Ở đây chúng ta nhấn mạnh vào <code>when</code> và <code>what</code>.</p>

<p><code>What</code> thì có lẽ quen thuộc hơn với 2 strategies nổi bật là <code>call-by-value</code>, <code>call-by-reference</code> (Tên gọi của các strategy trong bài viết này mình sử dụng như tại Wikipedia). Đối với Swift thì các đối số thuộc kiểu Class sẽ áp dụng call-by-reference còn các kiểu dữ liệu còn lại như String, Struct, Tuple, Enum, Int, &hellip; đều áp dụng call-by-value strategy. Như chúng ta đều biết với call-by-value thì trong hàm sẽ thao tác với 1 bản copy của đối số truyền vào nên không ảnh hưởng đến giá trị bên ngoài hàm. Còn call-by-reference thì thay cho việc copy mà thao tác với một reference tới instance của đối số nên mọi thay đổi bên trong hàm tới đối số sẽ ảnh hưởng đến biến bên ngoài hàm.</p>

<p>Còn <code>When</code> ở đấy muốn nói tới thời điểm đối số được evaluate, và sẽ là chủ đề chính của bài viết hôm nay. <code>When</code> thường thì chia làm 3 loại chính như sau:</p>

<ul>
<li>Eager evaluation</li>
<li>Call by name</li>
<li>Call by need</li>
</ul>


<p>Mình sẽ đi qua từng loại và kèm theo các ví dụ trong Swift, sau cùng sẽ rút ra kết luận về từng loại.</p>

<p><strong>(Eager evaluation)</strong></p>

<p>Đầu tiên mình hãy nhìn vào đoạn code đơn giản sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="nf">dosomething</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;dosomething&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="nl">status</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span><span class="p">(</span><span class="n">dosomething</span><span class="p">(),</span> <span class="s">&quot;200&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">dosomething</span>
</span><span class='line'><span class="n">foo</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nhìn vào output chúng ta thấy rằng hàm <code>dosomething</code> chạy trước hàm <code>foo</code>. Từ đấy có thể thấy đối số của <code>foo</code> đã bị evaluate trước khi body của hàm <code>foo</code> được thực hiện. Đây chính là <code>eager evaluation</code> strategy: đối số được evaluate trước khi truyền vào hàm. Tiếp theo chúng ta hãy cùng nhìn vào đoạn code sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="nf">expensiveComputation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;expensiveComputation&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="nl">status</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">status</span> <span class="o">==</span> <span class="s">&quot;200&quot;</span> <span class="o">?</span> <span class="nl">x</span> <span class="p">:</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span><span class="p">(</span><span class="n">expensiveComputation</span><span class="p">(),</span> <span class="s">&quot;404&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">expensiveComputation</span>
</span><span class='line'><span class="n">foo</span>
</span><span class='line'><span class="nl">result</span><span class="p">:</span> <span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Điểm khác biệt đầu tiên so với đoạn code trước đó là chúng ta có 1 tình toán cực kỳ tốn chi phí <code>expensiveComputation</code>, và được truyền vào như một đối số <code>x</code> của hàm <code>foo</code>. Hơn nữa bản thân bên trong hàm <code>foo</code> có những trường hợp không cần dùng đến <code>x</code> (như ví dụ là khi status != &ldquo;200&rdquo;). Quả là sự phung phí không hề nhỏ khi mà tồn tại trường hợp x không cần dùng đến nhưng đối số <code>x</code> vẫn bị evaluate từ đầu dẫn đến hàm <code>expensiveComputation</code> vẫn bị thực hiện.
Đây là ví dụ thứ nhất cho thấy vấn đề của <code>eager evaluation</code>.</p>

<p>Ví dụ tiếp theo khi sử dụng <code>map</code> và <code>filter</code> như sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="n">array</span> <span class="o">=</span> <span class="n">Array</span><span class="p">(</span><span class="mf">0.</span><span class="p">.</span><span class="mf">.100000</span><span class="p">)</span>
</span><span class='line'><span class="k">let</span> <span class="n">doubles</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="k">in</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;map&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">doubles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">map</span>
</span><span class='line'><span class="p">...</span> <span class="c1">// (100001 lần)</span>
</span><span class='line'><span class="n">map</span>
</span><span class='line'><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Đây chỉ là ví dụ đơn giản để chúng ta dễ hiểu hơn. Còn hãy tưởng tượng bạn có 1 mảng khá lớn và sau khi qua các bước sử dụng <code>map</code>, <code>filter</code> để xử lý thì cuối cùng chúng ta chỉ sử dụng 1 số lượng phần tử nhỏ hơn nhiều so với số lượng mảng ban đầu. Nhưng tất cả các phần tử trong mảng đều đã bị evaluate cho dù tồn tại những phần tử không thực sự cần thiết phải evaluate.</p>

<p>Thêm một ví dụ nữa sử dụng <code>function currying</code> như đoạn code sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="nf">dosomething</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;dosomething&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="nl">a</span><span class="p">:</span> <span class="n">Int</span><span class="p">)(</span><span class="nl">b</span><span class="p">:</span> <span class="n">Int</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;add&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">cFoo</span> <span class="o">=</span> <span class="n">foo</span><span class="p">(</span><span class="n">dosomething</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//cFoo(b: 10)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Sau khi truyền đối số thứ nhất cho hàm <code>foo</code> chúng ta sẽ nhận được 1 hàm mới là <code>cFoo</code>. Hàm cFoo này sẽ có nhiệm vụ nhận thêm 1 đối số còn lại của hàm <code>foo</code> bạn đầu và sau đó thực hiện xử lý bên trong <code>foo</code>. Các xử lý trong <code>foo</code> chỉ thực hiện khi chúng ta gọi <code>cFoo</code> với đối số còn lại là <code>b</code>.
Thế nhưng với <code>eager evaluation</code> strategy thì đối số <code>a</code> bị evaluate tại thời điểm tạo hàm <code>cFoo</code>, ngay cả khi cFoo chưa được gọi. Dẫn tới thời điểm evaluate <code>a</code>, thời điểm evaluate <code>b</code>, thời điểm xử lý của hàm <code>foo</code> được thực hiện là hoàn toàn khác nhau.</p>

<p>Từ 3 ví dụ trên chúng ta thấy có những trường hợp chúng ta chỉ muốn evaluate khi thực sự cần thiết, hay chỉ muốn evaluate những biến cần dùng, hay có thể chúng ta muốn thay đổi thời điểm evaluate vào bên trong hàm. Điều này sẽ được giải quyết bởi <code>call-by-name</code> strategy.</p>

<p><strong>(Call-by-name)</strong></p>

<p>Để chuyển thời điểm evaluate vào trong hàm hay chỉ evaluate khi thực sự cần thiết, với Swift thì tuỳ trường hợp mà ta có cách khác nhau. Trường hợp function/method do chúng ta tự khai báo như ví dụ thứ nhất và thứ ba ở phần trước chúng ta có thể sửa lại cách khai báo đối số bằng cách wrap đối số bởi một closure như đoạn code sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="nf">expensiveComputation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;expensiveComputation&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span><span class="p">,</span> <span class="nl">status</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">status</span> <span class="o">==</span> <span class="s">&quot;200&quot;</span> <span class="o">?</span> <span class="n">x</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span><span class="p">({</span> <span class="n">expensiveComputation</span><span class="p">()</span> <span class="p">},</span> <span class="s">&quot;404&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">foo</span>
</span><span class='line'><span class="nl">result</span><span class="p">:</span> <span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Đối số đầu tiên của hàm <code>foo</code> không phải kiểu <code>Int</code> như ban đầu mà chuyển thành closure có kiểu <code>() -&gt; Int</code>. Và khi cần evaluate chúng ta gọi closure <code>x()</code> để evaluate. Như vậy đối số <code>x</code> sẽ không bị evaluate trước khi hàm <code>foo</code> được thực hiện, và ngoài ra chỉ trong trường hợp <code>status == "200"</code> thì <code>x</code> mới bị evaluate và hàm <code>expensiveComputation</code> mới bị thực hiện.
Tuy nhiên chú ý rằng hàm <code>foo</code> đã thay đổi khai báo nên khi gọi hàm <code>foo</code> chúng ta phải wrap đối số thứ nhất trong 1 closure có kiểu <code>() -&gt; Int</code> như <code>{ expensiveComputation() }</code>.
Tuy nhiên việc gọi rườm rà này chúng ta có thể giải quyết bằng việc sử dụng thuộc tính <code>@autoclosure</code> khi khai báo hàm <code>foo</code> như sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="nf">expensiveComputation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;expensiveComputation&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="p">@</span><span class="n">autoclosure</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span><span class="p">,</span> <span class="nl">status</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">status</span> <span class="o">==</span> <span class="s">&quot;200&quot;</span> <span class="o">?</span> <span class="n">x</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span><span class="p">(</span><span class="n">expensiveComputation</span><span class="p">(),</span> <span class="s">&quot;404&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nhờ có việc sử dụng <code>@autoclosure</code> mà khi gọi hàm <code>foo</code> chúng ta thấy code không có gì thay đổi so với bình thường.</p>

<p>Thế còn trường hợp như ví dụ thứ hai của phần trước thì sao. Khi mà chúng ta chỉ muốn evaluate những biến thực sự cần thiết, nhưng hàm <code>map</code> và <code>filter</code> là do thư viện chuẩn của Swift cung cấp, chúng ta không thể thêm <code>@autoclosure</code> vào được. Tin vui đó là Swift cung cấp chúng ta function <code>lazy()</code> mà ít khi ta chú ý tới.</p>

<p align="center">
<img style="-webkit-user-select: none;" src="https://qiita-image-store.s3.amazonaws.com/0/18907/dbf84e44-9664-e29d-6dfa-64de9d10829c.png" height="180">
</p>


<p>Ví dụ như để giải quyết vấn đề ở ví dụ trước chúng ta chỉ cần sử dụng function <code>lazy</code> để tạo ra lazy collection như sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="n">array</span> <span class="o">=</span> <span class="n">lazy</span><span class="p">(</span><span class="n">Array</span><span class="p">(</span><span class="mf">0.</span><span class="p">.</span><span class="mf">.1000</span><span class="p">))</span>
</span><span class='line'><span class="k">let</span> <span class="n">doubles</span> <span class="o">=</span> <span class="n">array</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">i</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="k">in</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;map&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">2</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">doubles</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">map</span>
</span><span class='line'><span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Và kết quả là chỉ những phần tử cần thiết mới phải evaluate.</p>

<p>Mình lại tiếp tục cùng xem đoạn code sau:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="nf">expensiveComputation</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;expensiveComputation&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">func</span> <span class="n">foo</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="p">@</span><span class="n">autoclosure</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Int</span><span class="p">,</span> <span class="nl">status</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">status</span> <span class="o">==</span> <span class="s">&quot;200&quot;</span> <span class="o">?</span> <span class="n">x</span><span class="p">()</span> <span class="o">:</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">let</span> <span class="n">t1</span> <span class="o">=</span> <span class="n">x</span><span class="p">()</span>
</span><span class='line'>    <span class="k">let</span> <span class="n">t2</span> <span class="o">=</span> <span class="n">x</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">println</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">foo</span><span class="p">(</span><span class="n">expensiveComputation</span><span class="p">(),</span> <span class="s">&quot;404&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">foo</span>
</span><span class='line'><span class="n">expensiveComputation</span>
</span><span class='line'><span class="n">expensiveComputation</span>
</span><span class='line'><span class="nl">result</span><span class="p">:</span> <span class="mi">0</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ta thấy rằng mỗi lần access thì x lại bị evaluate lại tức là hàm <code>expensiveComputation</code> bị thực hiện lại. Không ít những trường hợp mà chúng ta muốn tránh việc evaluate lại như thế. Đấy chính là điểm khác biệt của <code>call-by-need</code> so với <code>call-by-name</code>.</p>

<p><strong>(Call-by-need)</strong></p>

<p>Giống như call-by-name strategy, call-by-need cũng chỉ evaluate biến khi thực sự cần thiết, thế nhưng việc evaluate chỉ thực hiện lần đầu và kết quả được lưu lại và sử dụng cho những lần access tiếp theo.
Và dễ nhận thấy nhất là <code>lazy property</code> cũng sử dụng call-by-need strategy.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">class</span> <span class="n">Foo</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">lazy</span> <span class="k">var</span> <span class="nl">tmp</span><span class="p">:</span> <span class="n">Int</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">println</span><span class="p">(</span><span class="s">&quot;tmp init&quot;</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'>        <span class="p">}()</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="s">&quot;before init&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="s">&quot;after init&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">foo</span><span class="p">.</span><span class="n">tmp</span>
</span><span class='line'><span class="n">foo</span><span class="p">.</span><span class="n">tmp</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">before</span> <span class="k">init</span>
</span><span class='line'><span class="n">after</span> <span class="k">init</span>
</span><span class='line'><span class="n">tmp</span> <span class="k">init</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nhìn vào kết quả output ta thấy property <code>tmp</code> chỉ được evaluate khi cần thiết (khi acccess <code>foo.tmp</code>). Ngoài ra việc evaluate chỉ thực hiện một lần duy nhất, những lần access sau đều sử dụng giá trị đã evaluate ở lần đầu tiên.
Ngoài <code>lazy property</code> thì <code>global variable</code> hay <code>static property</code> đều mặc định áp dụng call-by-need strategy.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">static</span> <span class="k">var</span> <span class="nl">tmp</span><span class="p">:</span> <span class="n">Int</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">println</span><span class="p">(</span><span class="s">&quot;tmp init&quot;</span><span class="p">)</span>
</span><span class='line'>            <span class="k">return</span> <span class="mi">1</span>
</span><span class='line'>        <span class="p">}()</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">static</span> <span class="k">func</span> <span class="n">log</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">()</span>
</span><span class='line'><span class="n">Foo</span><span class="p">.</span><span class="n">log</span><span class="p">()</span>
</span><span class='line'><span class="n">println</span><span class="p">(</span><span class="s">&quot;access tmp&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">let</span> <span class="n">x</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">.</span><span class="n">tmp</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// output</span>
</span><span class='line'><span class="n">foo</span>
</span><span class='line'><span class="n">access</span> <span class="n">tmp</span>
</span><span class='line'><span class="n">tmp</span> <span class="k">init</span>
</span></code></pre></td></tr></table></div></figure>


<h5>Kết luận</h5>

<ul>
<li><code>Eager evaluation</code>:

<ul>
<li>evaluation được thực hiện trước khi truyền vào hàm</li>
</ul>
</li>
<li><code>Call-by-name</code>:

<ul>
<li>evaluation thực hiện trong hàm hay chỉ evaluate khi thực sư cần thiết</li>
<li>thế nhưng việc evaluation sẽ bị thực hiện lại mỗi khi access</li>
<li>cách áp dụng call-by-name strategy:

<ul>
<li>đối với những funtion/method tự khai báo thì có thể dùng <code>@autoclosure</code> để thực hiện call-by-name strategy</li>
<li>khi sử dụng <code>map</code>, <code>filter</code> chúng ta có thể sử dụng function <code>lazy</code> để tạo ra lazy collection/sequence</li>
</ul>
</li>
</ul>
</li>
<li>Call-by-need:

<ul>
<li>evaluation chỉ thực hiện khi cần thiết</li>
<li>lazy evaluation, global variable, static property mặc định áp dụng strategy này</li>
</ul>
</li>
</ul>

</div>
  
  


      
    </article>
  
    
    <article>
      
        
  <header>
    
      <h1 class="entry-title vn-title"><a href="/blog/2015/03/20/hakuba/">Hakuba</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-03-20T01:33:10+09:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:33 am</span></time>
        
         | <a href="/blog/2015/03/20/hakuba/#disqus_thread"
             + data-disqus-identifier="http://nghialv.github.io/blog/2015/03/20/hakuba/">Comments</a>
        
      </p>
    
  </header>



  <div class="entry-content"><p><a href="https://github.com/nghialv/Hakuba">Github</a></p>

<p>I want to slim down my view controllers.</p>

<p>I want to manage tableview without the code of <code>UITableViewDelegate</code> and <code>UITableViewDataSource</code>.</p>

<p>That is why I created <code>Hakuba</code>.</p>

<p>( <strong>Hakuba</strong> is one of the most famous ski resorts in Japan. )</p>

<h2>Features</h2>

<ul>
<li>Don&rsquo;t have to write the code for <code>UITableViewDelegate</code> and <code>UITableViewDataSource</code> protocols</li>
<li>Easy to manage your sections and cells (append/reset/insert/remove/update)</li>
<li>Support dynamic cell height from <strong>ios7</strong></li>
<li>Don&rsquo;t have to worry about cell identifier</li>
<li>Handling cell selection by trailing closure</li>
<li>Easy to implement header/footer view (floating callback)</li>
<li>Support for creating cells from Nibs or Storyboards</li>
<li>Method chaining</li>
<li>Subscript</li>
<li>Support loadmore closure</li>
<li>Complete example</li>
</ul>


<h5>Quick example</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// viewController swift file</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span> <span class="o">=</span> <span class="n">Hakuba</span><span class="p">(</span><span class="nl">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">YourCellModel</span><span class="p">(</span><span class="nl">title</span><span class="p">:</span> <span class="s">&quot;Title&quot;</span><span class="p">,</span> <span class="nl">des</span><span class="p">:</span> <span class="s">&quot;description&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select cell with title = \(title)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodel</span><span class="p">)</span>      <span class="c1">// append a new cell model in datasource</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Fade</span><span class="p">)</span>           <span class="c1">// show the cell of your cell model in the table view</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">remove</span><span class="p">(</span><span class="mf">1.</span><span class="p">.</span><span class="mf">.3</span><span class="p">)</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Right</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// your cell swift file</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nl">YourCellModel</span> <span class="p">:</span> <span class="n">MYCellModel</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">let</span> <span class="nl">title</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'>  <span class="k">let</span> <span class="nl">des</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">init</span><span class="p">(</span><span class="nl">title</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">des</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">selectionHandler</span><span class="p">:</span> <span class="n">MYSelectionHandler</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nb">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
</span><span class='line'>      <span class="nb">self</span><span class="p">.</span><span class="n">des</span> <span class="o">=</span> <span class="n">des</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">.</span><span class="k">init</span><span class="p">(</span><span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">selectionHandler</span><span class="p">:</span> <span class="n">selectionHandler</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nl">YourCell</span> <span class="p">:</span> <span class="n">MYTableViewCell</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">@</span><span class="kt">IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nl">titleLabel</span><span class="p">:</span> <span class="bp">UILabel</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'>  <span class="kr">override</span> <span class="k">func</span> <span class="n">configureCell</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">MYCellModel</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">.</span><span class="n">configureCell</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">data</span> <span class="kt">as</span><span class="o">?</span> <span class="n">YourCellModel</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">titleLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">cellmodel</span><span class="p">.</span><span class="n">title</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Usage</h2>

<ul>
<li>Initilization</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">private</span> <span class="k">var</span> <span class="n">hakuba</span> <span class="o">=</span> <span class="n">Hakuba</span><span class="p">(</span><span class="nl">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Section handling</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">section</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">secIndex</span><span class="p">]</span> <span class="c1">// retrieve a section or create a new section if it doesn&#39;t already exist</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// inserting</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nl">atIndex</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// removing</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Left</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">removeAll</span><span class="p">()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>      
</span><span class='line'><span class="c1">// handing section index by enum</span>
</span><span class='line'><span class="k">enum</span> <span class="nl">Section</span> <span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">MYSectionIndex</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Top</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Center</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Bottom</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">var</span> <span class="nl">intValue</span><span class="p">:</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">self</span><span class="p">.</span><span class="n">rawValue</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">let</span> <span class="n">topSection</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Cell handling</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// 1. appending</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodel</span><span class="p">)</span>              <span class="c1">// append a cellmodel</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Fade</span><span class="p">)</span>                   <span class="c1">// and slide with `Fade` animation</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodels</span><span class="p">)</span>         <span class="c1">// append a list of cellmodes</span>
</span><span class='line'>      <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Left</span><span class="p">)</span>                    
</span><span class='line'>
</span><span class='line'><span class="c1">// by using section</span>
</span><span class='line'><span class="k">let</span> <span class="n">section</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">]</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodel</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// 2. inserting</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">cellmodels</span><span class="p">,</span> <span class="nl">atIndex</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Middle</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// 3. reseting</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">cellmodels</span><span class="p">)</span>               <span class="c1">// replace current data in section by the new data</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>                           <span class="c1">// or remove all data in section</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>  
</span><span class='line'>
</span><span class='line'><span class="c1">// 4. removing</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Right</span><span class="p">)</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mf">2.</span><span class="p">.</span><span class="mf">.5</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">removeLast</span><span class="p">()</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// updating cell data</span>
</span><span class='line'><span class="k">let</span> <span class="n">section</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">]</span>
</span><span class='line'><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">property</span> <span class="o">=</span> <span class="n">newData</span>
</span><span class='line'><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">slide</span><span class="p">()</span>     
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">sort</span><span class="p">().</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">shuffle</span><span class="p">().</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">map</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">filter</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">reduce</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">mapFilter</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">each</span>
</span><span class='line'>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">first</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">last</span>
</span><span class='line'><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">count</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Creating cell model</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// create a cell model</span>
</span><span class='line'><span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">MYCellModel</span><span class="p">(</span><span class="nl">cellClass</span><span class="p">:</span> <span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">celldata</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// create a list of cell models from api results</span>
</span><span class='line'><span class="k">let</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[...]</span> <span class="c1">// or your data from API</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">cellmodels</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">item</span> <span class="o">-&gt;</span> <span class="n">MYCellModel</span> <span class="k">in</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">MYCellModel</span><span class="p">(</span><span class="nl">cellClass</span><span class="p">:</span> <span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select cell&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Register cell, header, footer</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerCellNib</span><span class="p">(</span><span class="n">CellClassName</span><span class="p">)</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerCellClass</span><span class="p">(</span><span class="n">CellClassName</span><span class="p">)</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerHeaderFooterNib</span><span class="p">(</span><span class="n">HeaderOrFooterClassName</span><span class="p">)</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerHeaderFooterClass</span><span class="p">(</span><span class="n">HeaderOrFooterClassName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// register a list of cells by using variadic parameters</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerCellNib</span><span class="p">(</span><span class="n">CellClass1</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="n">CellClass2</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="p">...,</span> <span class="n">CellClassN</span><span class="p">.</span><span class="nb">self</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Section header/footer</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">header</span> <span class="o">=</span> <span class="n">MYHeaderFooterViewModel</span><span class="p">(</span><span class="nl">viewClass</span><span class="p">:</span> <span class="n">CustomHeaderView</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">yourData</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select header view&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">].</span><span class="n">header</span> <span class="o">=</span> <span class="n">header</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// hide header in section 1</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Center</span><span class="p">].</span><span class="n">header</span><span class="o">?</span><span class="p">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="nb">false</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Loadmore</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">loadmoreEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">loadmoreHandler</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// request api</span>
</span><span class='line'>  <span class="c1">// append new data</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Commit editing</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">commitEditingHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="nb">self</span><span class="p">]</span> <span class="n">style</span><span class="p">,</span> <span class="n">indexPath</span> <span class="k">in</span>
</span><span class='line'>  <span class="nb">self</span><span class="o">?</span><span class="p">.</span><span class="n">hakuba</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">].</span><span class="n">remove</span><span class="p">(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Deselect all cells</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">deselectAllCells</span><span class="p">(</span><span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Dynamic cell height : when you want to enable dynamic cell height, you only need to set the value of estimated height to the <code>height</code> parameter and set <code>dynamicHeightEnabled = true</code></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">MYCellModel</span><span class="p">(</span><span class="nl">cellClass</span><span class="p">:</span> <span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">yourCellData</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select cell&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">cellmodel</span><span class="p">.</span><span class="n">dynamicHeightEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Callback methods in the cell class</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="n">willAppear</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">MYCellModel</span><span class="p">)</span>
</span><span class='line'><span class="k">func</span> <span class="n">didDisappear</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">MYCellModel</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Installation</h2>

<ul>
<li>Installation with CocoaPods</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">Hakuba</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Copying all the files into your project</li>
<li>Using submodule</li>
</ul>


<h2>Requirements</h2>

<ul>
<li>iOS 7.0+</li>
<li>Xcode 6.1</li>
</ul>


<h2>License</h2>

<p>Hakuba is released under the MIT license. See LICENSE for details.</p>
</div>
  
  


      
    </article>
  
    
    <article>
      
        
  <header>
    
      <h1 class="entry-title vn-title"><a href="/blog/2015/01/20/materialkit/">MaterialKit</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-20T01:20:13+09:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>1:20 am</span></time>
        
         | <a href="/blog/2015/01/20/materialkit/#disqus_thread"
             + data-disqus-identifier="http://nghialv.github.io/blog/2015/01/20/materialkit/">Comments</a>
        
      </p>
    
  </header>



  <div class="entry-content"><p>Material design components (inspired by <a href="http://www.google.com/design/spec/material-design/introduction.html">Google Material Design</a>) for iOS written in Swift</p>

<p>Please feel free to make pull requests.</p>

<p><a href="https://github.com/nghialv/MaterialKit">Github</a></p>

<h2>Features</h2>

<ul>
<li>Highly customizable</li>
<li>Complete example</li>
<li>Supports @IBDesignable to live-render the component in the Interface Builder</li>
<li><p>By suporting @IBInspectable, the class properties can be exposed in the Interface Builder, and you can edit these properties in realtime</p></li>
<li><p>[x] MKButton: floating action button, raised button, flat button, ripple effect</p></li>
<li>[x] MKTextField: ripple effect, floating placeholder</li>
<li>[x] MKTableViewCell</li>
<li>[x] MKLabel</li>
<li>[x] MKImageView</li>
<li>[ ] MKTextView <strong>(In progress)</strong></li>
<li>[ ] MKSwitch <strong>(In progress)</strong></li>
<li>[ ] MKAlert <strong>(In progress)</strong></li>
<li>[ ] MKActivityIndicator <strong>(In progress)</strong></li>
<li>[x] MKLayer</li>
<li>[x] MKColor</li>
</ul>


<h2>Components</h2>

<h4>MKButton</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKButton.gif" width="365" height="568">
</p>


<ul>
<li>There are 3 types of main buttons: <code>Floating Action Button</code>, <code>Raised Button</code>, <code>Flat Button</code></li>
<li>Custommizable attributes: color, ripple location, animation timing function, animation duration&hellip;</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">button</span> <span class="o">=</span> <span class="n">MKButton</span><span class="p">(</span><span class="nl">frame</span><span class="p">:</span> <span class="bp">CGRect</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">y</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mi">35</span><span class="p">))</span>
</span><span class='line'><span class="n">button</span><span class="p">.</span><span class="n">maskEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">button</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">TapLocation</span>
</span><span class='line'><span class="n">button</span><span class="p">.</span><span class="n">rippleLayerColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">LightGreen</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKTextField</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKTextField.gif" width="365" height="568">
</p>


<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKTextField_bottomborder.gif" width="365" height="111">
</p>


<ul>
<li>Single-line text field</li>
<li>Floating placeholder</li>
<li>Ripple Animation</li>
<li>Custommizable attributes: color, ripple location, bottom border, animation timing function, animation duration&hellip;</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">Left</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">floatingPlaceholderEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s">&quot;Description&quot;</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">borderColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">Green</span><span class="p">.</span><span class="bp">CGColor</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">rippleLayerColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">LightGreen</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKTableViewCell</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKTableViewCell.gif" width="365" height="568">
</p>


<ul>
<li>Custommizable attributes: color, ripple location, animation timing function, animation duration&hellip;</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="n">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">dequeueReusableCellWithIdentifier</span><span class="p">(</span><span class="s">&quot;MyCell&quot;</span><span class="p">)</span> <span class="kt">as</span> <span class="n">MyCell</span>
</span><span class='line'><span class="n">cell</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">Center</span>
</span><span class='line'><span class="n">cell</span><span class="p">.</span><span class="n">rippleLayerColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">Blue</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKLabel, MKImageView (BarButtonItem)</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKBarButtonItem.gif" width="373" height="334">
</p>


<ul>
<li>Custommizable attributes: color, ripple location, animation timing function, animation duration&hellip;</li>
<li><p>Play ripple animation whenever you want by calling <code>animateRipple</code> method
or by setting <code>userInteractionEnabled = true</code> ripple animation will be played when the label/imageview is tapped</p></li>
<li><p>Easy to customize UIBarButtonItem or UITabBarButton by using MKLabel or MKImageView</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// customize UIBarButtonItem by using MKImageView</span>
</span><span class='line'><span class="k">let</span> <span class="n">imgView</span> <span class="o">=</span> <span class="n">MKImageView</span><span class="p">(</span><span class="nl">frame</span><span class="p">:</span> <span class="bp">CGRect</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">width</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mi">32</span><span class="p">))</span>
</span><span class='line'><span class="n">imgView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;uibaritem_icon.png&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">imgView</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">Center</span>
</span><span class='line'><span class="n">imgView</span><span class="p">.</span><span class="n">userInteractionEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">rightBarButton</span> <span class="o">=</span> <span class="bp">UIBarButtonItem</span><span class="p">(</span><span class="nl">customView</span><span class="p">:</span> <span class="n">imgView</span><span class="p">)</span>
</span><span class='line'><span class="nb">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">rightBarButtonItem</span> <span class="o">=</span> <span class="n">rightBarButton</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKProgressView (Coming Soon)</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKProgressView2.gif" width="217" height="155">
</p>




<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKProgressView.gif" width="217" height="155">
</p>


<h4>MKLayer</h4>

<p>A subclass of CALayer.</p>

<h4>MKColor</h4>

<p>A category for UIColor that adds some methods to get flat colors designed by <a href="http://www.google.com/design/spec/style/color.html">Google</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// get color from UIColor</span>
</span><span class='line'><span class="k">let</span> <span class="n">lightBlueColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">LightBlue</span>
</span></code></pre></td></tr></table></div></figure>


<h2>TODO</h2>

<ul>
<li>[x] pod file</li>
</ul>


<h2>Installation</h2>

<ul>
<li>Installation with CocoaPods</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">MaterialKit</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Copying all the files into your project</li>
<li>Using submodule</li>
</ul>


<h2>Requirements</h2>

<ul>
<li>iOS 7.0+</li>
<li>Xcode 6.1</li>
</ul>


<h2>License</h2>

<p>MaterialKit is released under the MIT license. See LICENSE for details.</p>
</div>
  
  


      
    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/19/lazy-evaluation-in-swift/">Lazy Evaluation in Swift</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/20/hakuba/">Hakuba</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/20/materialkit/">MaterialKit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/15/net-a-httprequest-wrapper-written-in-swift/">Net - a HttpRequest wrapper</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/05/puqiz/">Puqiz</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/nghialv">@nghialv</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'nghialv',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - nghialv -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'nghialv';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>










  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
