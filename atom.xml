<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[nghialv blog]]></title>
  <link href="http://nghialv.github.io/atom.xml" rel="self"/>
  <link href="http://nghialv.github.io/"/>
  <updated>2015-04-19T01:40:28+09:00</updated>
  <id>http://nghialv.github.io/</id>
  <author>
    <name><![CDATA[nghialv]]></name>
    <email><![CDATA[nghialv2607@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Hakuba]]></title>
    <link href="http://nghialv.github.io/blog/2015/03/20/hakuba/"/>
    <updated>2015-03-20T01:33:10+09:00</updated>
    <id>http://nghialv.github.io/blog/2015/03/20/hakuba</id>
    <content type="html"><![CDATA[<p><a href="https://github.com/nghialv/Hakuba">Github</a></p>

<p>I want to slim down my view controllers.</p>

<p>I want to manage tableview without the code of <code>UITableViewDelegate</code> and <code>UITableViewDataSource</code>.</p>

<p>That is why I created <code>Hakuba</code>.</p>

<p>( <strong>Hakuba</strong> is one of the most famous ski resorts in Japan. )</p>

<h2>Features</h2>

<ul>
<li>Don&rsquo;t have to write the code for <code>UITableViewDelegate</code> and <code>UITableViewDataSource</code> protocols</li>
<li>Easy to manage your sections and cells (append/reset/insert/remove/update)</li>
<li>Support dynamic cell height from <strong>ios7</strong></li>
<li>Don&rsquo;t have to worry about cell identifier</li>
<li>Handling cell selection by trailing closure</li>
<li>Easy to implement header/footer view (floating callback)</li>
<li>Support for creating cells from Nibs or Storyboards</li>
<li>Method chaining</li>
<li>Subscript</li>
<li>Support loadmore closure</li>
<li>Complete example</li>
</ul>


<h5>Quick example</h5>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// viewController swift file</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span> <span class="o">=</span> <span class="n">Hakuba</span><span class="p">(</span><span class="nl">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">YourCellModel</span><span class="p">(</span><span class="nl">title</span><span class="p">:</span> <span class="s">&quot;Title&quot;</span><span class="p">,</span> <span class="nl">des</span><span class="p">:</span> <span class="s">&quot;description&quot;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select cell with title = \(title)&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodel</span><span class="p">)</span>      <span class="c1">// append a new cell model in datasource</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Fade</span><span class="p">)</span>           <span class="c1">// show the cell of your cell model in the table view</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">remove</span><span class="p">(</span><span class="mf">1.</span><span class="p">.</span><span class="mf">.3</span><span class="p">)</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Right</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// your cell swift file</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nl">YourCellModel</span> <span class="p">:</span> <span class="n">MYCellModel</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">let</span> <span class="nl">title</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'>  <span class="k">let</span> <span class="nl">des</span><span class="p">:</span> <span class="n">String</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">init</span><span class="p">(</span><span class="nl">title</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">des</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="nl">selectionHandler</span><span class="p">:</span> <span class="n">MYSelectionHandler</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nb">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
</span><span class='line'>      <span class="nb">self</span><span class="p">.</span><span class="n">des</span> <span class="o">=</span> <span class="n">des</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">.</span><span class="k">init</span><span class="p">(</span><span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">selectionHandler</span><span class="p">:</span> <span class="n">selectionHandler</span><span class="p">)</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nl">YourCell</span> <span class="p">:</span> <span class="n">MYTableViewCell</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">@</span><span class="kt">IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nl">titleLabel</span><span class="p">:</span> <span class="bp">UILabel</span><span class="o">!</span>
</span><span class='line'>
</span><span class='line'>  <span class="kr">override</span> <span class="k">func</span> <span class="n">configureCell</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">MYCellModel</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">.</span><span class="n">configureCell</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span><span class='line'>      <span class="k">if</span> <span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">data</span> <span class="kt">as</span><span class="o">?</span> <span class="n">YourCellModel</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">titleLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">cellmodel</span><span class="p">.</span><span class="n">title</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Usage</h2>

<ul>
<li>Initilization</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">private</span> <span class="k">var</span> <span class="n">hakuba</span> <span class="o">=</span> <span class="n">Hakuba</span><span class="p">(</span><span class="nl">tableView</span><span class="p">:</span> <span class="n">tableView</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Section handling</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">section</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">secIndex</span><span class="p">]</span> <span class="c1">// retrieve a section or create a new section if it doesn&#39;t already exist</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// inserting</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="nl">atIndex</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// removing</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</span><span class='line'>        <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Left</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">removeAll</span><span class="p">()</span>
</span><span class='line'>        <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>      
</span><span class='line'><span class="c1">// handing section index by enum</span>
</span><span class='line'><span class="k">enum</span> <span class="nl">Section</span> <span class="p">:</span> <span class="n">Int</span><span class="p">,</span> <span class="n">MYSectionIndex</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Top</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Center</span>
</span><span class='line'>  <span class="k">case</span> <span class="n">Bottom</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">var</span> <span class="nl">intValue</span><span class="p">:</span> <span class="n">Int</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="nb">self</span><span class="p">.</span><span class="n">rawValue</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">let</span> <span class="n">topSection</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Cell handling</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// 1. appending</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodel</span><span class="p">)</span>              <span class="c1">// append a cellmodel</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Fade</span><span class="p">)</span>                   <span class="c1">// and slide with `Fade` animation</span>
</span><span class='line'>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodels</span><span class="p">)</span>         <span class="c1">// append a list of cellmodes</span>
</span><span class='line'>      <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Left</span><span class="p">)</span>                    
</span><span class='line'>
</span><span class='line'><span class="c1">// by using section</span>
</span><span class='line'><span class="k">let</span> <span class="n">section</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">]</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">cellmodel</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// 2. inserting</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">cellmodels</span><span class="p">,</span> <span class="nl">atIndex</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Middle</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// 3. reseting</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">reset</span><span class="p">(</span><span class="n">cellmodels</span><span class="p">)</span>               <span class="c1">// replace current data in section by the new data</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">reset</span><span class="p">()</span>                           <span class="c1">// or remove all data in section</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'>  
</span><span class='line'>
</span><span class='line'><span class="c1">// 4. removing</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">(.</span><span class="n">Right</span><span class="p">)</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="mf">2.</span><span class="p">.</span><span class="mf">.5</span><span class="p">)</span>
</span><span class='line'>     <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">removeLast</span><span class="p">()</span>
</span><span class='line'>       <span class="p">.</span><span class="n">slide</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// updating cell data</span>
</span><span class='line'><span class="k">let</span> <span class="n">section</span> <span class="o">=</span> <span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">]</span>
</span><span class='line'><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">property</span> <span class="o">=</span> <span class="n">newData</span>
</span><span class='line'><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">slide</span><span class="p">()</span>     
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">sort</span><span class="p">().</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">shuffle</span><span class="p">().</span><span class="n">slide</span><span class="p">()</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">map</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">filter</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">reduce</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">mapFilter</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">each</span>
</span><span class='line'>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">first</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">last</span>
</span><span class='line'><span class="n">section</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span class='line'><span class="n">section</span><span class="p">.</span><span class="n">count</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Creating cell model</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// create a cell model</span>
</span><span class='line'><span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">MYCellModel</span><span class="p">(</span><span class="nl">cellClass</span><span class="p">:</span> <span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">celldata</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// create a list of cell models from api results</span>
</span><span class='line'><span class="k">let</span> <span class="n">items</span> <span class="o">=</span> <span class="p">[...]</span> <span class="c1">// or your data from API</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">cellmodels</span> <span class="o">=</span> <span class="n">items</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">item</span> <span class="o">-&gt;</span> <span class="n">MYCellModel</span> <span class="k">in</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">MYCellModel</span><span class="p">(</span><span class="nl">cellClass</span><span class="p">:</span> <span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select cell&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Register cell, header, footer</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerCellNib</span><span class="p">(</span><span class="n">CellClassName</span><span class="p">)</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerCellClass</span><span class="p">(</span><span class="n">CellClassName</span><span class="p">)</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerHeaderFooterNib</span><span class="p">(</span><span class="n">HeaderOrFooterClassName</span><span class="p">)</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerHeaderFooterClass</span><span class="p">(</span><span class="n">HeaderOrFooterClassName</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// register a list of cells by using variadic parameters</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">registerCellNib</span><span class="p">(</span><span class="n">CellClass1</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="n">CellClass2</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="p">...,</span> <span class="n">CellClassN</span><span class="p">.</span><span class="nb">self</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Section header/footer</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">header</span> <span class="o">=</span> <span class="n">MYHeaderFooterViewModel</span><span class="p">(</span><span class="nl">viewClass</span><span class="p">:</span> <span class="n">CustomHeaderView</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">yourData</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select header view&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Top</span><span class="p">].</span><span class="n">header</span> <span class="o">=</span> <span class="n">header</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// hide header in section 1</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">[</span><span class="n">Section</span><span class="p">.</span><span class="n">Center</span><span class="p">].</span><span class="n">header</span><span class="o">?</span><span class="p">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="nb">false</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Loadmore</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">loadmoreEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">loadmoreHandler</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// request api</span>
</span><span class='line'>  <span class="c1">// append new data</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Commit editing</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">commitEditingHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">[</span><span class="k">weak</span> <span class="nb">self</span><span class="p">]</span> <span class="n">style</span><span class="p">,</span> <span class="n">indexPath</span> <span class="k">in</span>
</span><span class='line'>  <span class="nb">self</span><span class="o">?</span><span class="p">.</span><span class="n">hakuba</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">].</span><span class="n">remove</span><span class="p">(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Deselect all cells</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">hakuba</span><span class="p">.</span><span class="n">deselectAllCells</span><span class="p">(</span><span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Dynamic cell height : when you want to enable dynamic cell height, you only need to set the value of estimated height to the <code>height</code> parameter and set <code>dynamicHeightEnabled = true</code></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">cellmodel</span> <span class="o">=</span> <span class="n">MYCellModel</span><span class="p">(</span><span class="nl">cellClass</span><span class="p">:</span> <span class="n">YourCell</span><span class="p">.</span><span class="nb">self</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nl">userData</span><span class="p">:</span> <span class="n">yourCellData</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">println</span><span class="p">(</span><span class="s">&quot;Did select cell&quot;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">cellmodel</span><span class="p">.</span><span class="n">dynamicHeightEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Callback methods in the cell class</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">func</span> <span class="n">willAppear</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">MYCellModel</span><span class="p">)</span>
</span><span class='line'><span class="k">func</span> <span class="n">didDisappear</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">MYCellModel</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Installation</h2>

<ul>
<li>Installation with CocoaPods</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">Hakuba</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Copying all the files into your project</li>
<li>Using submodule</li>
</ul>


<h2>Requirements</h2>

<ul>
<li>iOS 7.0+</li>
<li>Xcode 6.1</li>
</ul>


<h2>License</h2>

<p>Hakuba is released under the MIT license. See LICENSE for details.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[MaterialKit]]></title>
    <link href="http://nghialv.github.io/blog/2015/01/20/materialkit/"/>
    <updated>2015-01-20T01:20:13+09:00</updated>
    <id>http://nghialv.github.io/blog/2015/01/20/materialkit</id>
    <content type="html"><![CDATA[<p>Material design components (inspired by <a href="http://www.google.com/design/spec/material-design/introduction.html">Google Material Design</a>) for iOS written in Swift</p>

<p>Please feel free to make pull requests.</p>

<p><a href="https://github.com/nghialv/MaterialKit">Github</a></p>

<h2>Features</h2>

<ul>
<li>Highly customizable</li>
<li>Complete example</li>
<li>Supports @IBDesignable to live-render the component in the Interface Builder</li>
<li><p>By suporting @IBInspectable, the class properties can be exposed in the Interface Builder, and you can edit these properties in realtime</p></li>
<li><p>[x] MKButton: floating action button, raised button, flat button, ripple effect</p></li>
<li>[x] MKTextField: ripple effect, floating placeholder</li>
<li>[x] MKTableViewCell</li>
<li>[x] MKLabel</li>
<li>[x] MKImageView</li>
<li>[ ] MKTextView <strong>(In progress)</strong></li>
<li>[ ] MKSwitch <strong>(In progress)</strong></li>
<li>[ ] MKAlert <strong>(In progress)</strong></li>
<li>[ ] MKActivityIndicator <strong>(In progress)</strong></li>
<li>[x] MKLayer</li>
<li>[x] MKColor</li>
</ul>


<h2>Components</h2>

<h4>MKButton</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKButton.gif" width="365" height="568">
</p>


<ul>
<li>There are 3 types of main buttons: <code>Floating Action Button</code>, <code>Raised Button</code>, <code>Flat Button</code></li>
<li>Custommizable attributes: color, ripple location, animation timing function, animation duration&hellip;</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">button</span> <span class="o">=</span> <span class="n">MKButton</span><span class="p">(</span><span class="nl">frame</span><span class="p">:</span> <span class="bp">CGRect</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">y</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="nl">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mi">35</span><span class="p">))</span>
</span><span class='line'><span class="n">button</span><span class="p">.</span><span class="n">maskEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">button</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">TapLocation</span>
</span><span class='line'><span class="n">button</span><span class="p">.</span><span class="n">rippleLayerColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">LightGreen</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKTextField</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKTextField.gif" width="365" height="568">
</p>


<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKTextField_bottomborder.gif" width="365" height="111">
</p>


<ul>
<li>Single-line text field</li>
<li>Floating placeholder</li>
<li>Ripple Animation</li>
<li>Custommizable attributes: color, ripple location, bottom border, animation timing function, animation duration&hellip;</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">Left</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">floatingPlaceholderEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">placeholder</span> <span class="o">=</span> <span class="s">&quot;Description&quot;</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">borderColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">Green</span><span class="p">.</span><span class="bp">CGColor</span>
</span><span class='line'><span class="n">textField</span><span class="p">.</span><span class="n">rippleLayerColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">LightGreen</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKTableViewCell</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKTableViewCell.gif" width="365" height="568">
</p>


<ul>
<li>Custommizable attributes: color, ripple location, animation timing function, animation duration&hellip;</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">var</span> <span class="n">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">dequeueReusableCellWithIdentifier</span><span class="p">(</span><span class="s">&quot;MyCell&quot;</span><span class="p">)</span> <span class="kt">as</span> <span class="n">MyCell</span>
</span><span class='line'><span class="n">cell</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">Center</span>
</span><span class='line'><span class="n">cell</span><span class="p">.</span><span class="n">rippleLayerColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">Blue</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKLabel, MKImageView (BarButtonItem)</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKBarButtonItem.gif" width="373" height="334">
</p>


<ul>
<li>Custommizable attributes: color, ripple location, animation timing function, animation duration&hellip;</li>
<li><p>Play ripple animation whenever you want by calling <code>animateRipple</code> method
or by setting <code>userInteractionEnabled = true</code> ripple animation will be played when the label/imageview is tapped</p></li>
<li><p>Easy to customize UIBarButtonItem or UITabBarButton by using MKLabel or MKImageView</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// customize UIBarButtonItem by using MKImageView</span>
</span><span class='line'><span class="k">let</span> <span class="n">imgView</span> <span class="o">=</span> <span class="n">MKImageView</span><span class="p">(</span><span class="nl">frame</span><span class="p">:</span> <span class="bp">CGRect</span><span class="p">(</span><span class="nl">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nl">width</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mi">32</span><span class="p">))</span>
</span><span class='line'><span class="n">imgView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;uibaritem_icon.png&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">imgView</span><span class="p">.</span><span class="n">rippleLocation</span> <span class="o">=</span> <span class="p">.</span><span class="n">Center</span>
</span><span class='line'><span class="n">imgView</span><span class="p">.</span><span class="n">userInteractionEnabled</span> <span class="o">=</span> <span class="nb">true</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">rightBarButton</span> <span class="o">=</span> <span class="bp">UIBarButtonItem</span><span class="p">(</span><span class="nl">customView</span><span class="p">:</span> <span class="n">imgView</span><span class="p">)</span>
</span><span class='line'><span class="nb">self</span><span class="p">.</span><span class="n">navigationItem</span><span class="p">.</span><span class="n">rightBarButtonItem</span> <span class="o">=</span> <span class="n">rightBarButton</span>
</span></code></pre></td></tr></table></div></figure>


<h4>MKProgressView (Coming Soon)</h4>

<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKProgressView2.gif" width="217" height="155">
</p>




<p align="center">
<img style="-webkit-user-select: none;" src="https://dl.dropboxusercontent.com/u/8556646/MKProgressView.gif" width="217" height="155">
</p>


<h4>MKLayer</h4>

<p>A subclass of CALayer.</p>

<h4>MKColor</h4>

<p>A category for UIColor that adds some methods to get flat colors designed by <a href="http://www.google.com/design/spec/style/color.html">Google</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// get color from UIColor</span>
</span><span class='line'><span class="k">let</span> <span class="n">lightBlueColor</span> <span class="o">=</span> <span class="bp">UIColor</span><span class="p">.</span><span class="n">MKColor</span><span class="p">.</span><span class="n">LightBlue</span>
</span></code></pre></td></tr></table></div></figure>


<h2>TODO</h2>

<ul>
<li>[x] pod file</li>
</ul>


<h2>Installation</h2>

<ul>
<li>Installation with CocoaPods</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="n">pod</span> <span class="err">&#39;</span><span class="n">MaterialKit</span><span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Copying all the files into your project</li>
<li>Using submodule</li>
</ul>


<h2>Requirements</h2>

<ul>
<li>iOS 7.0+</li>
<li>Xcode 6.1</li>
</ul>


<h2>License</h2>

<p>MaterialKit is released under the MIT license. See LICENSE for details.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Net - a HttpRequest wrapper]]></title>
    <link href="http://nghialv.github.io/blog/2014/10/15/net-a-httprequest-wrapper-written-in-swift/"/>
    <updated>2014-10-15T08:29:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2014/10/15/net-a-httprequest-wrapper-written-in-swift</id>
    <content type="html"><![CDATA[<p>Net is a HttpRequest wrapper written in Swift.</p>

<p><a href="https://github.com/nghialv/Net">source code : https://github.com/nghialv/Net</a></p>

<h3>Features</h3>

<ul>
<li>GET, POST, PUT, DELETE method</li>
<li>Powerful request params: nested params, number, string, dic, array, image, data</li>
<li>Json, Image, Xml Response</li>
<li>Download file: resume, suspend, cancel</li>
<li>Upload file, data, params(multi-part)</li>
<li>Progress closure</li>
<li>Background donwload, upload</li>
<li>Authentication</li>
<li>Batch of operations</li>
<li>BaseURL</li>
<li>Customizable header</li>
</ul>


<h3>Demo app</h3>

<p><img src="https://dl.dropboxusercontent.com/u/8556646/screenshot2.png" alt="screenshot" /></p>

<h3>Usage</h3>

<p>Use one of the following methods to create a Net instance</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// without baseURL</span>
</span><span class='line'><span class="k">let</span> <span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// with baseURL</span>
</span><span class='line'><span class="k">let</span> <span class="n">net</span> <span class="o">=</span> <span class="n">Net</span><span class="p">(</span><span class="nl">baseUrlString</span><span class="p">:</span> <span class="s">&quot;http://www.puqiz.com/&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h4>HttpRequest</h4>

<h6><code>GET</code> Request</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;get_path&quot;</span>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;integerNumber&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;doubleNumber&quot;</span><span class="o">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="s">&quot;string&quot;</span><span class="o">:</span> <span class="s">&quot;hello&quot;</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">GET</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">successHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">responseData</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="nl">error</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;result \(result)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">failureHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// you can also make a request with absolute url</span>
</span><span class='line'><span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://www.puqiz.com/get_path&quot;</span>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">GET</span><span class="p">(</span><span class="nl">absoluteUrl</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">successHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">responseData</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="nl">error</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;result \(result)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">failureHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can also use nested params</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// nested params</span>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;string&quot;</span><span class="o">:</span> <span class="s">&quot;test&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&quot;integerNumber&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&quot;floatNumber&quot;</span><span class="o">:</span> <span class="mf">1.5</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&quot;array&quot;</span><span class="o">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">],</span>
</span><span class='line'>            <span class="s">&quot;dictionary&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s">&quot;x&quot;</span><span class="o">:</span> <span class="mf">100.0</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="o">:</span> <span class="mf">200.0</span><span class="p">],</span>
</span><span class='line'>            <span class="s">&quot;image&quot;</span><span class="o">:</span> <span class="n">NetData</span><span class="p">(</span><span class="nl">pngImage</span><span class="p">:</span> <span class="n">img</span><span class="p">,</span> <span class="nl">filename</span><span class="p">:</span> <span class="s">&quot;myIcon&quot;</span><span class="p">)]</span>
</span></code></pre></td></tr></table></div></figure>


<p>By using responseData in sucessHandler closure you can quickly</p>

<ul>
<li>get json dictionary</li>
<li>get image</li>
<li>parse xml</li>
</ul>


<p>for GET, POST, PUT, DELETE request.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// get json dictionary from response data</span>
</span><span class='line'><span class="k">let</span> <span class="n">jsonDic</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="nl">error</span><span class="p">:</span> <span class="n">error</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// get image from response data</span>
</span><span class='line'><span class="k">let</span> <span class="n">image</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">image</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// parse xml with delegate</span>
</span><span class='line'><span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">parseXml</span><span class="p">(</span><span class="nl">delegate</span><span class="p">:</span> <span class="nb">self</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h6><code>POST</code> Request</h6>

<p>Net will automatically check your params to send request as a URL-Encoded request or a Multi-Part request. So you can easily post with number, string, image or binary data.</p>

<ul>
<li>URL-Encoded Request</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;post_path&quot;</span>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;string&quot;</span><span class="o">:</span> <span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="s">&quot;integerNumber&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;floatNumber&quot;</span><span class="o">:</span> <span class="mf">1.5</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">POST</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">successHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">responseData</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="nl">error</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">failureHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Multi-Part Request</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;post_path&quot;</span>
</span><span class='line'><span class="k">let</span> <span class="n">img</span> <span class="o">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;puqiz_icon&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;string&quot;</span><span class="o">:</span> <span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="s">&quot;integerNumber&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&quot;icon&quot;</span><span class="o">:</span> <span class="n">NetData</span><span class="p">(</span><span class="nl">pngImage</span><span class="p">:</span> <span class="n">img</span><span class="p">,</span> <span class="nl">filename</span><span class="p">:</span> <span class="s">&quot;myIcon&quot;</span><span class="p">)]</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">POST</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">successHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">responseData</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="nl">error</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">failureHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<h6><code>PUT</code> Request</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;put_path&quot;</span>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;string&quot;</span><span class="o">:</span> <span class="s">&quot;test&quot;</span><span class="p">,</span> <span class="s">&quot;integerNumber&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;floatNumber&quot;</span><span class="o">:</span> <span class="mf">1.5</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">PUT</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">successHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">responseData</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="n">responseData</span><span class="p">.</span><span class="n">json</span><span class="p">(</span><span class="nl">error</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">failureHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<h6><code>DELETE</code> Request</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;delete_path&quot;</span>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;id&quot;</span><span class="o">:</span> <span class="mi">10</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">DELETE</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">successHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">responseData</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;result: \(result)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">failureHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Error&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<h4>Task</h4>

<p>Before using download/upload function you have to call <code>setupSession</code> method to setup the session.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// setup session without backgroundIdentifier</span>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">setupSession</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>To perform background downloads or uploads, you have to call <code>setupSession</code> method with a background identifier string. Then your download/upload tasks can be run even when the app is suspended, exits or crashes.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// setup session with backgroundIdentifier</span>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">setupSession</span><span class="p">(</span><span class="nl">backgroundIdentifier</span><span class="p">:</span> <span class="s">&quot;com.nghialv.download&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// you can set eventsForBackgroundHandler closure</span>
</span><span class='line'><span class="c1">// this closure will be invoked when a task is completed in the background</span>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">eventsForBackgroundHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="n">urlSession</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">urlSession</span><span class="p">.</span><span class="n">getDownloadingTasksCount</span><span class="p">{</span> <span class="n">downloadingTaskCount</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">downloadingTaskCount</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;All files have been downloaded!&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h6>Download</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">downloadTask</span> <span class="o">=</span> <span class="n">net</span><span class="p">.</span><span class="n">download</span><span class="p">(</span><span class="nl">absoluteUrl</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nl">progress</span><span class="p">:</span> <span class="p">{</span> <span class="n">progress</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;progress \(progress)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">completionHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">fileUrl</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">error</span> <span class="o">!=</span> <span class="nb">nil</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Download failed&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Downloaded to  : \(fileUrl)&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// you can control your task</span>
</span><span class='line'><span class="n">downloadTask</span><span class="p">.</span><span class="n">resume</span><span class="p">()</span>
</span><span class='line'><span class="n">downloadTask</span><span class="p">.</span><span class="n">suspend</span><span class="p">()</span>
</span><span class='line'><span class="n">downloadTask</span><span class="p">.</span><span class="n">cancel</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<h6>Upload</h6>

<ul>
<li>Upload with file path</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">task</span> <span class="o">=</span> <span class="n">net</span><span class="p">.</span><span class="n">upload</span><span class="p">(</span><span class="nl">absoluteUrl</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nl">fromFile</span><span class="p">:</span> <span class="n">file</span><span class="p">,</span> <span class="nl">progressHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">progress</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;progress \(progress)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">completionHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="k">if</span> <span class="n">error</span> <span class="o">!=</span> <span class="nb">nil</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Upload failed : \(error)&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Upload completed&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Upload with data</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">yourData</span> <span class="o">=</span> <span class="bp">NSData</span><span class="p">(...)</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">upload</span><span class="p">(</span><span class="nl">absoluteUrl</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span> <span class="nl">data</span><span class="p">:</span> <span class="n">yourData</span><span class="p">,</span> <span class="nl">progressHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">progress</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;progress: \(progress)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">completionHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Upload completed&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Upload with params</li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="k">let</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;image_file&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">let</span> <span class="n">imageData</span> <span class="o">=</span> <span class="n">UIImagePNGRepresentation</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span class='line'><span class="k">let</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;number&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s">&quot;string&quot;</span><span class="o">:</span> <span class="s">&quot;net&quot;</span><span class="p">,</span> <span class="s">&quot;data&quot;</span><span class="o">:</span> <span class="n">imageData</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'><span class="n">net</span><span class="p">.</span><span class="n">upload</span><span class="p">(</span><span class="nl">absoluteUrl</span><span class="p">:</span> <span class="n">imgUrl</span><span class="p">,</span> <span class="nl">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span> <span class="nl">progressHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">progress</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;progress: \(progress)&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">},</span> <span class="nl">completionHandler</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
</span><span class='line'>      <span class="n">NSLog</span><span class="p">(</span><span class="s">&quot;Upload completed&quot;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>By default, the upload task will be performed as POST method and</p>

<ul>
<li><code>Content-Type</code> = <code>application/octet-stream</code> (upload with file or data)</li>
<li><code>Content-Type</code> = <code>multipart/form-data</code> (upload with params)</li>
</ul>


<p>But you can configure the upload task before resuming.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// set method</span>
</span><span class='line'><span class="n">yourUploadTask</span><span class="p">.</span><span class="n">setHttpMethod</span><span class="p">(.</span><span class="n">PUT</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// set header field</span>
</span><span class='line'><span class="n">yourUploadTask</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="nl">value</span><span class="p">:</span> <span class="s">&quot;your_value&quot;</span><span class="p">,</span> <span class="nl">forHttpHeaderField</span><span class="p">:</span> <span class="s">&quot;header_field&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>In progress</h3>

<ul>
<li>Batch of operations</li>
<li>Basic authentiacation</li>
</ul>


<h3>Integration</h3>

<p>Just drag Net folder to the project tree</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Puqiz]]></title>
    <link href="http://nghialv.github.io/blog/2014/10/05/puqiz/"/>
    <updated>2014-10-05T12:25:57+09:00</updated>
    <id>http://nghialv.github.io/blog/2014/10/05/puqiz</id>
    <content type="html"><![CDATA[<h3>Description</h3>

<p>.
Swift, Ruby, Java, C++.</p>

<p>. (^^)</p>

<p>FEATURES</p>

<ul>
<li>  (</li>
<li></li>
<li></li>
<li></li>
<li></li>
<li></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[GCD - a wrapper of Grand Central Dispatch]]></title>
    <link href="http://nghialv.github.io/blog/2014/10/01/gcd-a-wrapper-of-grand-central-dispatch-written-in-swift/"/>
    <updated>2014-10-01T20:22:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2014/10/01/gcd-a-wrapper-of-grand-central-dispatch-written-in-swift</id>
    <content type="html"><![CDATA[<p>GCD is a wrapper of Grand Central Dispatch written in Swift.</p>

<p><a href="https://github.com/nghialv/GCD">source code : https://github.com/nghialv/GCD</a></p>

<h3>Examples</h3>

<h6>&ndash; gcd</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// submit your code for asynchronous execution on a global queue with high priority</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">High</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// or with main thread</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">Main</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">Default</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'>    <span class="n">gcd</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">Main</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// code run on main thread</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// with your custom queue</span>
</span><span class='line'><span class="k">let</span> <span class="n">myQueue</span> <span class="o">=</span> <span class="n">GCDQueue</span><span class="p">(</span><span class="nl">serial</span><span class="p">:</span> <span class="s">&quot;myQueue&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">Custom</span><span class="p">(</span><span class="n">myQueue</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// run with delay</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">Background</span><span class="p">,</span> <span class="nl">delay</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// sync code</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">sync</span><span class="p">(.</span><span class="n">Main</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// apply</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">apply</span><span class="p">(.</span><span class="n">Default</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span> <span class="n">index</span> <span class="k">in</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// once</span>
</span><span class='line'><span class="k">var</span> <span class="nl">onceToken</span><span class="p">:</span> <span class="n">GCDOnce</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'><span class="n">gcd</span><span class="p">.</span><span class="n">once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">onceToken</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h6>&ndash; manage group of block with GCDGroup</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// create group</span>
</span><span class='line'><span class="k">let</span> <span class="n">group</span> <span class="o">=</span> <span class="n">GCDGroup</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// you can add async code to group</span>
</span><span class='line'><span class="n">group</span><span class="p">.</span><span class="n">async</span><span class="p">(.</span><span class="n">Defaul</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// you can set notify for this group</span>
</span><span class='line'><span class="n">group</span><span class="p">.</span><span class="n">notify</span><span class="p">(.</span><span class="n">Main</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// or wait synchronously for block in group to complete and timeout is 10 seconds</span>
</span><span class='line'><span class="n">group</span><span class="p">.</span><span class="n">wait</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<h6>&ndash; create your custom queue with CGDQueue</h6>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='swift'><span class='line'><span class="c1">// create a serial queue</span>
</span><span class='line'><span class="k">let</span> <span class="n">serialQueue</span> <span class="o">=</span> <span class="n">GCDQueue</span><span class="p">(</span><span class="nl">serial</span><span class="p">:</span> <span class="s">&quot;mySerialQueue&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// create a concurrent queue</span>
</span><span class='line'><span class="k">let</span> <span class="n">concurrentQueue</span> <span class="o">=</span> <span class="n">GCDQueue</span><span class="p">(</span><span class="nl">concurrent</span><span class="p">:</span> <span class="s">&quot;myConcurrentQueue&quot;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// you can submit async barrier to queue</span>
</span><span class='line'><span class="n">myQueue</span><span class="p">.</span><span class="n">asyncBarrier</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// or sync code</span>
</span><span class='line'><span class="n">myQueue</span><span class="p">.</span><span class="n">syncBarrier</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// your code</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Integration</h3>

<p>Just drag GCD.swift file to the project tree</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[#include, #import, @import (clang modules)]]></title>
    <link href="http://nghialv.github.io/blog/2014/01/06/clang-modules/"/>
    <updated>2014-01-06T04:14:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2014/01/06/clang-modules</id>
    <content type="html"><![CDATA[<h1>M u</h1>

<p>Happy New Year! Chc mi ngi nm mi vui v, hnh phc.</p>

<p>Nh cc bn cng bit gn y XCode5 cng iOS7  c gii thiu.
i cng XCode5 l feature mi modules ca Clang, mt gii php nhm gii quyt mt s vn  nh tng tc  compile source code ca ng dng.
Hm nay mnh s gii thiu qua v tnh nng modules ny.
Hin ti th modules  c th s dng trong C v Objective-C trn mi trng iOS7 hoc MacOSX 10.9.
Cc on code di y tuy mnh vit bng Objective-C nhng cng gn nh tng t vi C.
 hiu v modules th trc tin mnh s gii thch ln lt v <code>#include</code>, <code>#import</code>, v pre-compiled headers (PCH), sau  l v modules.</p>

<h2>#include</h2>

<p>Khi chng ta include 1 file header th ti giai on preprocessing ca qu trnh compile,
compiler s copy ni dung ca file header ny v paste vo dng #include.
V tt nhin qu trnh copy/paste ny l  quy cho n khi copy xong tt c file header m n include v cc file header khc c include ti cc file n include. (hi xon)</p>

<p>V d vi chng trnh helloworld quen thuc nh di y:</p>

<figure class='code'><figcaption><span>helloworld.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#include &lt;Foundation/Foundation.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>     <span class="n">NSLog</span><span class="p">(</span><span class="err">@</span><span class="n">Hello</span> <span class="n">world</span><span class="err"></span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>     <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Chng ta c th chy preprocessor  xem file sinh ra sau giai on ny bng lnh <code>clang -E helloworld.m | less</code>.</p>

<p>Nhn vo kt qu output chng ta c th thy ti hn 92000 dng l ca Foundation.h (v ca cc file header m Foundation.h include), ch 8 dng cui l code ca chng ta.</p>

<p>Vi vic s dng <code>#include</code> tn ti vn  gi l recursive include. V d :</p>

<figure class='code'><figcaption><span>FirstFile.h </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#include &quot;SecondFile.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Some code */</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>SecondFile.h </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#include &quot;FirstFile.h&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Some other code */</span>
</span></code></pre></td></tr></table></div></figure>


<p>Khi y preprocessor s duyt file FirstFile.h v copy ni dung ca SecondFile.h vo FirstFile.h.
Khi duyt file SecondFile.h li copy/paste ni dung ca file FirstFile.h.
Vn  ny c gi l recursive include.</p>

<h2>#import</h2>

<p>Trong Objective-C  trnh vn  recursive include nh trn th chng ta thng dng <code>#import</code>.
Khi dng <code>#import</code> th trc khi include 1 file header, preprocessor s kim tra xem file y  c include cha,
nu  include ri th s khng include na.
Tng t trong C chng ta cng trnh recursive include bng vic kim tra file header  c  include cha nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>#ifndef MYFILE_H
</span><span class='line'>#define MYFILE_H
</span><span class='line'> 
</span><span class='line'>// Some code
</span><span class='line'>  
</span><span class='line'>#endif</span></code></pre></td></tr></table></div></figure>


<h2>@import</h2>

<p>Tuy nhin vic s dng <code>#import</code> cng nh <code>#include</code> khin cho preprocessor i mt vi 1 s vn  khc nh Fragility v Performance.
 hiu v vn  Header Fragility chng ta xem qua mt v d n gin sau:</p>

<figure class='code'><figcaption><span>MyFile.h </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#define NSURL @my url&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#import &lt;Foundation/Foundation.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">MyClass</span> :<span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Khi  sau qu trnh preprocessing th file header ca chng ta s nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#define NSURL @my url&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// on code c copy t Foundation.h</span>
</span><span class='line'><span class="c1">// v tt c nhng on c cha NSURL ca Foundation.h u b thay bng my url</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">MyClass</span> :<span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Tt c nhng on NSURL ca Foundation.h u b preprocessor thay th bng my url do c <code>#define NSURL @my url</code> bn trn.
T  ta thy vi vic dng <code>#include</code> hay <code>#import</code> thng thng th cc header ca cc file khc,
hay ca th vin m chng ta dng u c th b nh hng nh vic dng <code>#define</code>  trn.</p>

<p>V vn  performance th nh  trn ta  thy <code>#include</code> v <code>#import</code> s copy/paste ton b file header m n include ( quy).
Nh  v d u tin chng ta ch include mnh Foundation.h nhng sau khi preprocessing th c ti hn 92000 dng l ca
Foundation.h (v cc file header m Foundation.h include), ch 8 dng cui l code ca chng ta.
Th nn thi gian compile s tr nn nhiu hn rt nhiu.</p>

<h2>Pre-compiled headers</h2>

<p> gii quyt 1 phn vn  performance chng ta c th dng precompiled headers (.pch).
Nu cc bn ch  th tt c iOS project khi c XCode to ra u c file PROJECTNAME-Prefix.pch nh sau:</p>

<figure class='code'><figcaption><span>PROJECTNAME-Prefix.pch </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#import &lt;Availability.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#ifndef __IPHONE_3_0</span>
</span><span class='line'><span class="cp">#warning &quot;This project uses features only available in iOS SDK 3.0 and later.&quot;</span>
</span><span class='line'><span class="cp">#endif</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#ifdef __OBJC__</span>
</span><span class='line'>    <span class="err">#</span><span class="n">import</span> <span class="o">&lt;</span><span class="n">UIKit</span><span class="o">/</span><span class="n">UIKit</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span>
</span><span class='line'>    <span class="err">#</span><span class="n">import</span> <span class="o">&lt;</span><span class="n">Foundation</span><span class="o">/</span><span class="n">Foundation</span><span class="p">.</span><span class="n">h</span><span class="o">&gt;</span><span class="n">Foundation</span><span class="p">;</span>
</span><span class='line'><span class="cp">#endif</span>
</span></code></pre></td></tr></table></div></figure>


<p>Trong file .pch ny chng ta s include nhng header m c kh nng c include ti nhiu ni trong source code
ca ng dng nh Foundation.h, UIKit.h Khi source code ca ng dng c compile th file .pch ny s c compile u tin,
ng ngha vi vic tt c file header c include trong file .pch ny s c compile trc v c include vo tt c source code.</p>

<p>Bng vic caching nhng file header  c bin dch ny th nhng file ny ch cn compile 1 ln,
nhng ln sau ch cn s dng li nn thi gian compile s c rt gn.</p>

<p>Th nhng cc developer thng khng hay qun l file .pch ny, v khng phi file header no cng c dng ti nhiu ni trong source code
nn hiu qu ca .pch cha c cao.</p>

<h2>Modules</h2>

<p>Vo thng 11 nm 2012, Doug Gregor (mt k s ca Apple)  gii thiu tnh nng modules nhm gii quyt vn  trn ca proprocessor thay cho .pch.
Vy module l g? Module chnh l mt package m t mt library, framework.</p>

<p>V d chy 2 lnh di y ta s c th xem c cc module trong SDK ca iOS7.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cd `xcrun --sdk iphoneos --show-sdk-path`
</span><span class='line'>% find . -name module.map   
</span><span class='line'>
</span><span class='line'> ./Developer/Library/Frameworks/XCTest.framework/module.map   
</span><span class='line'> ./System/Library/Frameworks/AudioToolbox.framework/module.map   
</span><span class='line'> ./System/Library/Frameworks/AudioUnit.framework/module.map   
</span><span class='line'> ./System/Library/Frameworks/CoreAudio.framework/module.map     
</span><span class='line'>    :     
</span><span class='line'>    :   
</span><span class='line'> ./usr/include/dispatch/module.map   
</span><span class='line'> ./usr/include/mach-o/module.map   
</span><span class='line'> ./usr/include/module.map   
</span><span class='line'> ./usr/include/objc/module.map</span></code></pre></td></tr></table></div></figure>


<p>Vi mi framework ta thy c 1 file module.map  m t framework y.</p>

<p>V  s dng framework chng ta c th thay <code>#import &lt;Frameworkname.h&gt;</code> bng <code>@import Frameworkname;</code>
V d khi s dng framework Foundation ta s dng <code>@import Foundation;</code>
Vy khi trong mt file header gp on import module th compiler  x l g v ti sao li gii quyt c vn  Fragility v
Performance ca preprocessor?</p>

<p>V d khi trong mt file header, preprocessor gp <code>@import Foundation</code> th s x l cc bc nh sau:</p>

<ul>
<li>Tm file module.map ca framework c tn l Foundation</li>
<li>Da vo m t v framework trong file module.map ny compiler s parse cc file headers v
sinh ra file module (lu di dng AST &ndash; biu din di dng tree trc khi chuyn sang m my)</li>
<li>Load file module ny ti on khai bo import</li>
<li>Cache file module ny  s dng li cho nhng ln sau</li>
</ul>


<p>Th nht thay v copy ni dung cc file header c include ri mi compile, m import trc tip file module  c
lu di dng AST nn cc header ca framework ko b nh hng bi cc on code trc khi import (nh #define) &ndash;>
 trnh c vn  Fragility.</p>

<p>Th hai l nh vic cache nhng file module ny m compiler khng phi bin dch ln 2 nn s rt gn thi gian bin dch.</p>

<p>Ngoi ra mt iu th v na m tnh nng module mang li cho lp trnh vin  l chng ta khng phi t tay link cc framework m chng ta import.
V d nh trc y nu trong file tmp.m c <code>#include &lt;Foundation/Foundation.h&gt;</code> th khi bin dch chng ta phi t link ti Foundation bng lnh :
<code>clang tmp.m -o tmp -framework Foundation</code></p>

<p>Th nhng khi s dng <code>@import</code> th chng ta khng cn phi t link ti framework na m ch cn:</p>

<p><code>clang tmp.m -o tmp -fmodules</code></p>

<p>Vi XCode chng ta s khng phi add thm cc framework m mnh mun dng trong <code>Link Binary With Libraries</code> nh hnh di y.</p>

<p><img src="http://nghialv.github.io/images/clang_modules/link_framework.png"></p>

<p>i vi nhng project c to t XCode5 th tnh nng module t ng c enable.
Nhng nhng project c to trc y cc bn phi t enable trong phn <code>Build Settings</code> (tc l set flag -fmodules).</p>

<p><img src="http://nghialv.github.io/images/clang_modules/enable_module.png"></p>

<h1>Kt lun</h1>

<p>Bi vit ny mnh  gii thiu qua tnh nng module ca Clang trong c gii thiu t XCode5.
V ng thi cng gii thch qua v <code>#include</code>, <code>#import</code>, pch.
Mc d tnh nng module vn ang trong qu trnh hon thin nhng hin ti chng ta  c th s dng vi XCode5.</p>

<p>Cc bn c th tm hiu thm ti:</p>

<ul>
<li><a href="http://clang.llvm.org/docs/Modules.html">clang_modules</a></li>
<li><a href="http://llvm.org/devmtg/2012-11/Gregor-Modules.pdf">Bi pht biu ca Gregor</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[sslide]]></title>
    <link href="http://nghialv.github.io/blog/2013/11/06/sslide/"/>
    <updated>2013-11-06T10:00:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2013/11/06/sslide</id>
    <content type="html"><![CDATA[<h3>Description</h3>

<p>&ldquo;&mdash; Welcome to a new world of presentations &mdash;&rdquo;</p>

<p>SSlide is a presentation tool that will make your presentations more interactive.</p>

<p>FEATURES</p>

<ul>
<li><p>Integrating with SlideShare</p>

<ul>
<li>Browse your slides on SlideShare</li>
<li>Download slides for offline viewing</li>
<li>Browse your favourite slides at top page (you can add or remove the tags)</li>
<li>Search slides by keyword with three options: relevance, most viewed, latest</li>
</ul>
</li>
<li><p>Presentation</p>

<ul>
<li>Streaming

<ul>
<li>establish streaming for the subscribing from other devices</li>
<li>subscribe to a streaming channel (established by other device or web)</li>
<li>synchronize your slide page</li>
<li>synchronize your drawing on each page</li>
</ul>
</li>
<li>Send the questions to the presenter directly on your device</li>
<li>Take the notes in your slide</li>
</ul>
</li>
<li><p>Super cool interface</p></li>
</ul>


<p>keywords: slideshare, slide, presentation, streaming</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[[iOS property:attributes]]]></title>
    <link href="http://nghialv.github.io/blog/2013/09/10/ios-property-attributes/"/>
    <updated>2013-09-10T00:56:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2013/09/10/ios-property-attributes</id>
    <content type="html"><![CDATA[<h1>M u</h1>

<p>Nu bn  tng s dng Objective C th thy rng khi khai bo cc property cho 1 class no y chng ta c 2 cch nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">MyClass</span> : <span class="nc">NSObject</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">NSString</span> <span class="o">*</span><span class="n">myString</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>hoc c th dng <code>@property (attributes) type name</code>  khai bo nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">MyClass</span> : <span class="nc">NSObject</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">myString</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vi cch th 2 th compiler s t ng sinh ra cc setter/getter cho property y. Th nhng vic sinh ra setter/getter nh th no l ph thuc vo tp <code>attributes</code> m bn  set  trn. Khi mi bt u code iOS mnh thy vic set thuc tnh ny hi b lon vi kh nhiu thuc tnh (retain, strong, weak, unsafe_unretained, nonatomic&hellip;). Ri khi phin bn thay i, kiu project c dng ARC hay khng cng dn n vic s dng cc thuc tnh ny cng khc nhau. Ngoi ra trong mt s trng hp nu bn khng s dng ng thuc tnh c th lm app ca bn chy b li. Trong bi vit ny mnh s tm tt li cc thuc tnh ca property, cng nh ni v khi no s dng thuc tnh no, ti sao, v thuc tnh no l mc nh.</p>

<h1>Cc thuc tnh ca property</h1>

<p>Nu chia nhm th c l bao gm 3 nhm thuc tnh nh sau:</p>

<h2>Writability</h2>

<p>Nhm ny c 2 thuc tnh l <code>readwrite</code> v <code>readonly</code>. Nhm thuc tnh ny th kh l d hiu.
Vi thuc tnh <code>readwrite</code> th compiler s generate ra c setter v getter, cn <code>readonly</code> th compiler ch generate ra getter.
Mc nh l <code>readwrite</code> (khng lin quan n project dng ARC hay khng).</p>

<h2>Setter Semantics</h2>

<p>Nhm ny gm cc thuc tnh  ch ra cch thc qun l b nh, bao gm cc thuc tnh nh sau:
<code>assign</code>, <code>strong</code>, <code>weak</code>, <code>unsafe_unretained</code>, <code>retain</code>, <code>copy</code>.
Khi chng ta set mt trong cc thuc tnh ny cho property th setter (getter khng lin quan) c to ra thay i tng ng vi thuc tnh .
Trc ht chng ta s ni qua v cch qun l b nh trc iOS5 khi m ARC cha xut hin.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">Car</span> <span class="o">*</span><span class="n">car1</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Car</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'><span class="c1">//...</span>
</span><span class='line'><span class="p">[</span><span class="n">car1</span> <span class="n">release</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Trc khi ARC xut hin th cc lp trnh vin iOS u phi t qun l b nh.
Khi chng ta to object vi vng nh ca n, ng ngha vi vic chng ta nm gi ownership ca object .
Khi khng cn dng na th phi hu b ownership y i bng cch gi message <code>release</code>.
Mt object c th c nhiu ownership v mi object s c 1 property tn l <code>retainCount</code>  lu s lng owner ca n.
Mi khi chng ta to object, hay <code>retain</code> th <code>retainCount</code> li c tng ln 1.
Khi chng ta gi message <code>release</code> ti object y th <code>retainCount</code> li b gim i 1.
Mt khi <code>retainCount</code> bng 0 th vng nh ca n s b gii phng.
Chng ta c th gi message <code>retain</code>  to thm ownership nh v d di y. Khi  <code>car1</code> v <code>car2</code> cng tr n 1 vng nh v <code>retainCount</code> by gi bng 2.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// retain</span>
</span><span class='line'><span class="n">Car</span> <span class="o">*</span><span class="n">car2</span> <span class="o">=</span> <span class="p">[</span><span class="n">car1</span> <span class="n">retain</span><span class="p">];</span>  <span class="c1">// retainCount = 2</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ngoi ra  copy sang vng nh mi chng ta c th gi message <code>copy</code> nh v d di y. Khi  <code>retainCount</code>  vng nh mi c gi tr khi to l 1.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// copy</span>
</span><span class='line'><span class="n">Car</span> <span class="o">*</span><span class="n">car3</span> <span class="o">=</span> <span class="p">[</span><span class="n">car1</span> <span class="n">copy</span><span class="p">];</span>    <span class="c1">// retainCount = 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>Quay tr li vi thuc tnh ca property. Thuc tnh u tin l <code>retain</code>. Nh v d di y khi ta set thuc tnh <code>retain</code> cho property <code>name</code> th compiler s sinh ra setter <code>setName</code> nh bn di.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">Car</span>: <span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">retain</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setName:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">newName</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">newName</span> <span class="n">retain</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_name</span> <span class="n">release</span><span class="p">];</span>
</span><span class='line'>    <span class="n">_name</span> <span class="o">=</span> <span class="n">newName</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nhn vo setter ta thy u tin l to ownership (hay tng <code>retainCount</code> thm 1) ca <code>newName</code> bng cch gi <code>[newNmane retain]</code>.
Tip theo l vic gi message <code>release</code> ti <code>_name</code> ban u  xo ownership ban u i. Sau  mi gn contr tr n object mi.
Vy nn thuc tnh <code>retain</code> gip to ra setter trong  to ownership mi v tr n vng nh mi.
Ch  rng thuc tnh <code>retain</code> ch dng cho nhng project khng dng ARC.</p>

<p>V t iOS5 tr i Apple gii thiu ARC gip cho vic qun l b nh n gin hn. ARC khng hot ng nh cc <code>Garbage Collection</code> khc m thc ra ch l phn front-end ca compiler nhm mc ich t ng chn thm cc on code gi message nh <code>retain</code> hay <code>release</code>. T y lp trnh vin khng phi gi cc message ny na. V d nh 1 object c to trong 1 method th s chn thm on gi message <code>release</code> ti object   gn cui method. Hay trong trng hp l property ca 1 class <code>Car</code>  trn th t ng chn <code>[_name release]</code> trong method <code>dealloc</code> ca class <code>Car</code> chng hn.
Khi project ca bn dng ARC th chng ta s dng thuc tnh <code>strong</code> thay cho thuc tnh <code>retain</code>.
<code>strong</code> cng tng t nh <code>retain</code> s gip to ra setter, m trong setter  to ra ownership mi (tng retainCount thm 1). V ngoi ra ARC s thm cc on gi message <code>release</code> ti cc property ny trong method <code>dealloc</code> ca class.</p>

<p>Th nhng xut hin vn  c tn l <code>Strong Reference Cycles</code>. Mnh s ly 1 v d  thy r hn v vn  ny.
Mt object A no y c ownership ca 1 object B. Object B li c ownership ca 1 object C. Object C li c ownership ca object B.
Mt khi object A ko cn thit na th trong method <code>dealloc</code> ca A s gi message <code>release</code> ti object B. retainCount ca object B gim i 1 nhng vn cn 1 ( do object C retain ) th nn method <code>dealloc</code> ca object B khng bao gi c gi, ko theo message <code>release</code> cng khng bao gi c gi ti object C. T  dn n vng nh ca object B v object C khng c gii phng => xut hin hin tng Leak Memory.
V vy  trnh hin tng ny ta s dng thuc tnh <code>weak</code> thay v dng thuc tnh <code>strong</code> trong class ca object C.
Vi thuc tnh <code>weak</code> th trong setter c sinh ra s khng <code>retain</code> (khng tng retainCount thm 1) m ch n thun gn con tr tr n vng nh mi.
Thuc tnh <code>weak</code> cng ch dng trong trng hp bn ang dng ARC. V mt ci hay ca <code>weak</code> na l khi vng nh b gii phng th con tr c set bng <code>nil</code>. M trong Objective C th gi message n <code>nil</code> s khng vn  g, app ca bn khng b crash. in hnh nht ca vic dng thuc tnh <code>weak</code>  l cho cc <code>delegate</code>, <code>datasource</code>.</p>

<p>Tuy nhin vn cn mt vi class nh NSTextView, NSFont, NSColorSpace cha h tr khai bo thuc tnh <code>weak</code> nn vi nhng class ny bn c th dng thuc tnh <code>unsafe_unretained</code> thay cho <code>weak</code>. Th nhng ch  1 iu rng sau khi vng nh n tr ti b xo th con tr khng c set la nil.</p>

<p>Tip theo l thuc tnh <code>copy</code>. Vi vic thit lp thuc tnh ny compiller s to ra setter nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">Car</span>: <span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">copy</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">name</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setName:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">newName</span> <span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">_name</span> <span class="n">release</span><span class="p">];</span>
</span><span class='line'>    <span class="n">_name</span> <span class="o">=</span> <span class="p">[</span><span class="n">newName</span> <span class="n">copy</span><span class="p">];</span>     <span class="c1">// retainCount = 1</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nh  trn ta thy 1 vng nh mi c copy ra v <code>_name</code> gi chim gi 1 ownership ca vng nh .
Ti sao chng ta khng dng <code>strong</code>  y m li dng <code>copy</code>. Gi s  trn chng ta dng thuc tnh <code>strong</code> v xem qua 2 v d di y.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">NSString</span> <span class="o">*</span><span class="n">name1</span> <span class="o">=</span> <span class="s">@&quot;Toyota&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">car1</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name1</span><span class="p">;</span>
</span><span class='line'><span class="n">name1</span> <span class="o">=</span> <span class="s">@&quot;Honda&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Trong trng hp ny <code>car1.name</code> vn c gi tr l &ldquo;Toyota&rdquo; v <code>name1</code> gi chuyn thnh &ldquo;Honda&rdquo;. Hon ton khng c vn  g.
Th nhng trong v d th 2 di y thay v dng NSString m dng subclass ca n l NSMutableString.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">NSMutableString</span> <span class="o">*</span><span class="n">name1</span> <span class="o">=</span> <span class="s">@&quot;Toyota&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">car1</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name1</span><span class="p">;</span>
</span><span class='line'><span class="p">[</span><span class="n">name1</span> <span class="nl">appendString:</span><span class="s">&quot;2&quot;</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>Trong trng hp ny gi tr ca <code>car1.name</code> l &ldquo;Toyota2&rdquo; mc d ban u chng ta set l &ldquo;Toyota&rdquo;.
V vy mc d property <code>name</code> trong class <code>Car</code> vi kiu NSString nhng nu dng <code>strong</code> gi tr ca <code>name</code> vn c th b append nh trn.
 trnh nhng trng hp nh th ta dng <code>copy</code>  mi ln gn s copy 1 vng nh mi trnh c nhng trng hp nh trn.
i vi nhng class c subclass l <code>Mutable...</code> th chng ta nn ch  dng thuc tnh <code>copy</code>. Ngoi ra <code>block</code> cng phi dng <code>copy</code>.</p>

<p>Thuc tnh cui cng trong nhm ny l <code>assign</code> th dng cho cc property kiu khng phi l object. Tc l cc kiu d liu nh <code>int</code>, <code>NSInteger</code>, <code>float</code>,&hellip;</p>

<p>Vi nhm thuc tnh ny th <code>strong</code> l thuc tnh mc nh trong trng hp dng ARC, cn <code>retain</code> l thuc tnh mc nh trong trng hp khng dng ARC.</p>

<h2>Atomicity</h2>

<p>Nhm thuc tnh ny bao gm 2 thuc tnh l <code>atomic</code> v <code>nonatomic</code>. Thuc tnh mc nh l <code>atomic</code>.
Nhm thuc tnh ny lin quan n vn  multithread. Cha bn n atomic hay nonatomic, m chng ta cng xem v d sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">MyView</span> <span class="p">{</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="n">CGPoint</span> <span class="n">center</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>khi y chng ta c setter/getter nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">CGPoint</span><span class="p">)</span> <span class="nf">center</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">_center</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setCenter:</span><span class="p">(</span><span class="n">CGPoint</span><span class="p">)</span><span class="nv">newCenter</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">_center</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>v bi v struct CGPoint c 2 thnh phn <code>CGFloat x, CGFloat y</code> nn thc ra setter s thc hin cc bc nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setCenter:</span><span class="p">(</span><span class="n">CGPoint</span><span class="p">)</span><span class="nv">newCenter</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">_center</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
</span><span class='line'>  <span class="n">_center</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Trong trng hp chng ta chy multithread th c th xy ra kh nng nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// gi s ban u center ca myView l (-5.f, -8.f)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// thread 1 gi setter</span>
</span><span class='line'><span class="p">[</span><span class="n">myView</span> <span class="nl">setCenter:</span><span class="n">CGPointMake</span><span class="p">(</span><span class="mf">1.f</span><span class="p">,</span> <span class="mf">2.f</span><span class="p">)];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// tiep theo bn trong setCenter s chy</span>
</span><span class='line'><span class="n">_center</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">.</span><span class="n">x</span><span class="p">;</span> <span class="c1">// _center.x gi c gi tr l 1.f v _center.y vn gi gi tr l -8.f</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// cha kp chy lnh tip theo  set _center.y th  thread 2 gi getter</span>
</span><span class='line'><span class="n">CGPoint</span> <span class="n">point</span> <span class="o">=</span> <span class="p">[</span><span class="n">myView</span> <span class="n">center</span><span class="p">];</span>
</span><span class='line'><span class="c1">// v getter chy tr v (1.f, -8.f)</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// thread 1 tip tc gi tr cho y</span>
</span><span class='line'><span class="n">_center</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">.</span><span class="n">y</span> <span class="c1">// _center.y gi l  2.f</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nh trng hp  trn ta thy gi tr center l (1.f, 2.f) nhng ti thread 2 gi tr ly c li l (1.f, -8.f)
dn n kt qu khng c nh mong mun.
V vy trong trng hp multithread  trnh nhng tnh hung nh trn ta set thuc tnh <code>atomic</code> cho property. Khi y compiler s sinh ra cc setter/getter nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">CGPoint</span><span class="p">)</span> <span class="nf">center</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">CGPoint</span> <span class="n">curCenter</span><span class="p">;</span>
</span><span class='line'>  <span class="k">@synchronized</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">curCenter</span> <span class="o">=</span> <span class="n">_center</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">curCenter</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setCenter:</span><span class="p">(</span><span class="n">CGPoint</span><span class="p">)</span><span class="nv">newCenter</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">@synchronized</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">_center</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Bn trong setter/getter s dng lock  trnh vic nhiu thread truy cp ng thi. Th nhng vic dng lock s mt chi ph cng nh cn tr tc  ca chng trnh. V vy nn trong trng hp bn khng dng multithread hoc khng th xy ra nhng vn  nh trn th bn nn dng thuc tnh <code>nonatomic</code>  tng tc  cho chng trnh.</p>

<h1>Tng kt</h1>

<p>Bi vit ny mnh  trnh by v cc thuc tnh cho property, gii thch qua v cc thuc tnh cng nh khi no nn dng thuc tnh no.
Mc d mnh vn thy cn nhng lp trnh vin khng dng ARC nhng c l a s mi ngi  chuyn qua dng ARC.
Th nn thuc tnh <code>retain</code> c th khng cn dng na.
 tm hiu k hn cc bn c th c ti <a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/ProgrammingWithObjectiveC.pdf">Programming With Objective C</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[vlcamera]]></title>
    <link href="http://nghialv.github.io/blog/2013/08/13/vlcamera/"/>
    <updated>2013-08-13T11:29:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2013/08/13/vlcamera</id>
    <content type="html"><![CDATA[<h3>Description</h3>

<p>Do you like to put troll faces and funny texts in your photos? &ldquo;vlcamera&rdquo; can offer you all that.</p>

<p>FEATURES</p>

<ul>
<li>Easy to use! You can add unlimited number of troll faces and funny texts in your photos.</li>
<li>Easy to translate, rotate, scale, flip the troll faces and the texts</li>
<li>Can change the content of the texts with cool GUI.</li>
<li>Can undo, remove the troll faces and the texts.</li>
<li>Save photos to your Photo Album.</li>
<li>Share your photos with friends on Facebook and Twitter.</li>
<li>Enjoy your fun without any ads.</li>
</ul>


<p>Let&rsquo;s have funny moments with &ldquo;vlcamera&rdquo;.</p>

<p>keywords: troll, haivl, funny, photo, camera</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[To class datasource cho TableView]]></title>
    <link href="http://nghialv.github.io/blog/2013/08/12/tao-class-datasource-cho-tableview/"/>
    <updated>2013-08-12T18:16:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2013/08/12/tao-class-datasource-cho-tableview</id>
    <content type="html"><![CDATA[<h1>M u</h1>

<p> tip ni chui bi v TableView, hm nay mnh cng vit mt bi lin quan n TableView. Trong iOS TableView l class c dng kh nhiu.
Khi dng TableView chng ta thng phi set datasource v delegate cho TableView. Thng th datasource ca TableView l mt array.</p>

<p>Kh nhiu bn thng set datasource cho Tableview ngay trong ViewController (<code>tableview.datasource = self</code>). V khi y trong ViewController chng ta lun lun phi implement delegate cho TableViewDataSource nh sau:</p>

<figure class='code'><figcaption><span>TmpViewController.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#pragma mark - UITableViewDataSource delegate</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITalbeView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">numberOfRowsInSection:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">section</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">dataArray</span> <span class="n">count</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">static</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">cellIdentifier</span> <span class="o">=</span> <span class="s">@&quot;MyCell&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="c1">// ly cell c sn</span>
</span><span class='line'>  <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="n">cellIdentifier</span><span class="p">];</span>
</span><span class='line'>  <span class="c1">// nu khng c cell c sn th to cell mi</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="n">cell</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">UITableViewCell</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithStyle:</span><span class="n">UITableViewCellStyleDefault</span>
</span><span class='line'>                                 <span class="nl">reuseIdentifier:</span><span class="n">cellIdentifier</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">// ly d liu cho cell hin ti. (V d d liu l NSString)</span>
</span><span class='line'>  <span class="n">NSString</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">dataArray</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</span><span class='line'>  <span class="c1">// gn d liu cho cell</span>
</span><span class='line'>  <span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span> <span class="nl">setText:</span><span class="n">item</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vic vit nh trn i vi nhng ng dng nh th khng vn  g nhng khi ng dng s dng nhiu tableview th trong tng ViewController chng ta lun phi vit i vit li on code trn. Nu nhn k on code trn bn s thy thc ra vi mi TableView khc nhau chng ta ch cn thay i phn <code>#gn d liu cho cell</code> tu theo cu trc ca tng cell. Cn u nhng phn cn li chng ta c th s dng li code. Ngoi ra nu chng ta  nhng on code ny trong ViewController s khin ViewController tr nn di hn bi v bn thn ViewController  cha rt nhiu code nh delegate, code x l s kin, gesture. V vy  c mt ViewController ngn gn hn, d hiu hn, li tng tnh s dng li code chng ta s to 1 class datasource ring tn l TVArrayDataSource.</p>

<h1>To class TVArrayDataSource</h1>

<p>Vy chng ta s chuyn ht code  trn sang class TVArrayDataSource v trong cc ViewController chng ta ch cn vit phn <code>#gn d liu cho cell</code> tu theo cu trc ca cell. Vy trong TVArrayDataSource cn nhng property g?</p>

<p>u tin l <code>NSArray *items</code> tr n array data ca chng ta trong ViewController  chng ta c th ly data tng ng cho tng cell v cell identifier <code>NSString *cellIdentifier</code> l string dng  nh danh cell.</p>

<figure class='code'><figcaption><span>TVArrayDatasource.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">TVArrayDataSource</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSArray</span> <span class="o">*</span><span class="n">items</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">cellIdentifier</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span><span class='line'>
</span><span class='line'><span class="k">@implementation</span> <span class="nc">TVArrayDataSource</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">numberOfRowsInSection:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">section</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">items</span> <span class="n">count</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">// tm cell c sn</span>
</span><span class='line'>    <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="n">self</span><span class="p">.</span><span class="n">cellIdentifier</span><span class="p">];</span>
</span><span class='line'>    <span class="c1">// to cell mi nu khng tm thy</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">cell</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="p">...</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ly data cho cell</span>
</span><span class='line'>    <span class="kt">id</span> <span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">items</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// gn d liu cho cell</span>
</span><span class='line'>    <span class="p">...</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>u tin chng ta s ni v on <code>...</code> ti phn gn d liu cho cell. Ti v tu tng trng hp ca tableview m cell ca chng ta c cu trc khc nhau, data source c cu trc khc nhau nn phn gn d liu ny l khc nhau. Do  ti y chng ta c th gi n cc hm callback trong ViewController  gn d liu cho cell theo cch m chng ta mun. C nhiu cch nh dng block, selector hay delegate. Mnh th thy tin nht v ngn nht l block v selector nn mnh s to class TVArrayDataSource c th dng block hoc selector.</p>

<p>Vi block th chng ta cn to 1 property  lu block v execute block ti on gn d liu. Chng ta s thm block property vo TVArrayDataSource.m v to 1 method khi to dataSource vi block nh sau:</p>

<figure class='code'><figcaption><span>TVArrayDataSource.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">typedef</span> <span class="nf">void</span> <span class="p">(</span><span class="o">^</span><span class="n">TVCellConfigureBlock</span><span class="p">)(</span><span class="kt">id</span><span class="p">,</span> <span class="kt">id</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">TVArrayDataSource</span> : <span class="nc">NSObject</span> <span class="o">&lt;</span><span class="n">UITableViewDataSource</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* khi to datasource vi block */</span>
</span><span class='line'><span class="o">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nl">initWithItems:</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="n">items</span>
</span><span class='line'>     <span class="nl">cellIdentifier:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">cellIdentifier</span>
</span><span class='line'> <span class="nl">cellConfigureBlock:</span><span class="p">(</span><span class="n">TVCellConfigureBlock</span><span class="p">)</span> <span class="n">configureBlock</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>TVArrayDataSource.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">...</span>
</span><span class='line'><span class="c1">// thm block property vo</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">TVCellConfigureBlock</span> <span class="n">configureBlock</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// v method khi to ch n gin nh sau</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithItems:</span><span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nv">items</span>
</span><span class='line'>     <span class="nf">cellIdentifier:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">cellIdentifier</span>
</span><span class='line'> <span class="nf">cellConfigureBlock:</span><span class="p">(</span><span class="n">TVCellConfigureBlock</span><span class="p">)</span><span class="nv">configureBlock</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>    <span class="k">if</span><span class="p">(</span><span class="n">self</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">items</span> <span class="o">=</span> <span class="n">items</span><span class="p">;</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">cellIdentifier</span> <span class="o">=</span> <span class="n">cellIdentifier</span><span class="p">;</span>
</span><span class='line'>        <span class="n">self</span><span class="p">.</span><span class="n">configureBlock</span> <span class="o">=</span> <span class="n">configureBlock</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// v chng ta thm phn execute block ti on gn d liu cho cell</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>   <span class="c1">// tm cell c sn</span>
</span><span class='line'>    <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="n">self</span><span class="p">.</span><span class="n">cellIdentifier</span><span class="p">];</span>
</span><span class='line'>    <span class="c1">// to cell mi nu khng tm thy</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">cell</span> <span class="o">==</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="p">...</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// ly data cho cell</span>
</span><span class='line'>    <span class="kt">id</span> <span class="n">item</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">items</span> <span class="nl">objectAtIndex:</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// execute block  gn d liu cho cell</span>
</span><span class='line'>    <span class="n">self</span><span class="p">.</span><span class="n">configureBlock</span><span class="p">(</span><span class="n">cell</span><span class="p">,</span> <span class="n">item</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Khi  bn ViewController chng ta ch cn to 1 block  thc hin vic gn d liu cho cell. V block ny s c execute bng <code>self.configureBlock(cell, item)</code> vi tham s l cell hin ti v data tng ng ca cell. Bi v tham s ca block l cell hin ti v data cho cell y nnchng ta hon ton c th t do tu chnh cell theo  mun. V code bn ViewController s rt ngn v p nh sau:</p>

<figure class='code'><figcaption><span>ViewController1.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// configure block. Kiu tham s c th tu chnh theo kiu data bt k ca bn.</span>
</span><span class='line'><span class="n">TVCellConfigureBlock</span> <span class="n">configureCell</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">CellClassName</span> <span class="o">*</span><span class="n">cell</span><span class="p">,</span> <span class="n">DataType</span> <span class="o">*</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="c1">// gn d liu cho cell. v d nh sau:</span>
</span><span class='line'>  <span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">title</span> <span class="nl">setText:</span><span class="n">name</span><span class="p">];</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="c1">// to instance dataSource ca TVArrayDataSource v khi to vi block  trn</span>
</span><span class='line'><span class="n">dataSource</span> <span class="o">=</span> <span class="p">[[</span><span class="n">TVArrayDataSource</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithItems:</span><span class="n">items</span>
</span><span class='line'>                                       <span class="nl">cellIdentifier:</span><span class="s">@&quot;MYCELL&quot;</span>
</span><span class='line'>                                   <span class="nl">cellConfigureBlock:</span><span class="n">configureCell</span><span class="p">];</span>
</span><span class='line'><span class="n">tableView</span><span class="p">.</span><span class="n">datasource</span> <span class="o">=</span> <span class="n">dataSource</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Bn thy y gi trong ViewController th phn code cho dataSource ca tableView kh l p.
i khi bn mun vit on gn d liu cho cell vo mt method khc trong class ViewController thay v dng block.  cho nhng trng hp  nh  ni  trn chng ta c th dng selector. Tng t nh block chng ta cng s to mt <code>@property (assign, nonatomic) SEL configureSelector;</code> v i tng  execute method ca selector ny <code>@property (weak, nonatomic) id target;</code> (i tng ny chnh l ViewController). Chng ta cng cn to mt hm khi to datasource khc vi selector. Cui cng trong phn gn d liu cho cell chng ta execute method ca selector vi <code>objc_msgSend(self.target, self.configureSelector, cell, item);</code>. Do phn ny tng t nh i vi block  nn mnh khng gii thch thm m cc bn c th xem code trn github.</p>

<p>Tip theo cn mt on <code>...</code> ti phn to cell mi khi m khng tm thy cell c th dng li. Nh bn thy y  to cell mi chng ta cn bit Class ca cell. Vi Objective-C chng ta c th to 1 instance t tn class. Khi  chng ta c th to 1 cell nh sau:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">cell</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSClassFromString</span><span class="p">(</span><span class="n">CELL_CLASS_NAME</span><span class="p">)</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithStyle:</span><span class="n">UITableViewCellStyleDefault</span>
</span><span class='line'>                                                 <span class="nl">reuseIdentifier:</span><span class="n">self</span><span class="p">.</span><span class="n">cellIdentifier</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nh vy class TVArrayDataSource ch cn c thm thng tin l tn class ca cell l mi vic c th hon tt. Ngoi ra nhiu khi chng ta mun to cell t file Xib.  to cell t file xib chng ta cng ch cn bit thm tn file xib. Th nn mnh to thm mt property <code>cellName</code>  lu tn class ca cell hoc tn file Xib tu theo trng hp cell to t file xib hay t code.
Nh vy vic to class TVArrayDatasource  hon thnh. V by gi trong ViewController chng ta ch implement on code ngn nh sau:
Khi s dng vi block</p>

<figure class='code'><figcaption><span>block - ViewController.m</span><a href='https://github.com/nghialv/TVDataSource/blob/master/sample/TVDataSource/Classes/Controller/TVBlockViewController.m'>github </a></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// to block</span>
</span><span class='line'><span class="n">TVCellConfigureBlock</span> <span class="n">configureCell</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="n">CELL_CLASS_NAME</span> <span class="o">*</span><span class="n">cell</span><span class="p">,</span> <span class="n">DATATYPE</span> <span class="o">*</span><span class="n">name</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">title</span> <span class="nl">setText:</span><span class="n">name</span><span class="p">];</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'>
</span><span class='line'><span class="n">dataSource</span> <span class="o">=</span> <span class="p">[[</span><span class="n">TVArrayDataSource</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithItems:</span><span class="n">items</span>
</span><span class='line'>                                       <span class="nl">cellIdentifier:</span><span class="s">@&quot;MYCELL&quot;</span>
</span><span class='line'>                                   <span class="nl">cellConfigureBlock:</span><span class="n">configureCell</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">dataSource</span> <span class="nl">setXibFileName:</span><span class="s">@&quot;XibFileName&quot;</span><span class="p">];</span>
</span><span class='line'><span class="n">tableview</span><span class="p">.</span><span class="n">datasource</span> <span class="o">=</span> <span class="n">dataSource</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hoc khi s dng vi selector.</p>

<figure class='code'><figcaption><span>ViewController.m </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">dataSource</span> <span class="o">=</span> <span class="p">[[</span><span class="n">TVArrayDataSource</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithItems:</span><span class="n">items</span>
</span><span class='line'>                                       <span class="nl">cellIdentifier:</span><span class="s">@&quot;MYCELL&quot;</span>
</span><span class='line'>                                               <span class="nl">target:</span><span class="n">self</span>
</span><span class='line'>                                     <span class="nl">cellConfigureSel:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">configureCell:andItem:</span><span class="p">)];</span>
</span><span class='line'><span class="p">[</span><span class="n">dataSource</span> <span class="nl">setCellClassName:</span><span class="s">@&quot;CELL_CLASS_NAME&quot;</span><span class="p">];</span>
</span><span class='line'><span class="n">tableView</span><span class="p">.</span><span class="n">dataSource</span> <span class="o">=</span> <span class="n">dataSource</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// selector</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">configureCell:</span><span class="p">(</span><span class="n">CELL_CLASS_NAME</span> <span class="o">*</span><span class="p">)</span><span class="nv">cell</span> <span class="nf">andItem:</span><span class="p">(</span><span class="n">DATA_TYPE</span> <span class="o">*</span><span class="p">)</span><span class="nv">item</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">cell</span><span class="p">.</span><span class="n">title</span> <span class="nl">setText:</span><span class="n">item</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h1>Tng kt</h1>

<p>Bi vit trnh by v cch to class datasource ring cho tableView thay v implement trc tip trong ViewController. iu ny s gip ViewController ngn gn hn v code trng p hn, cng nh tng kh nng s dng li code. Chng ta c th dng li class TVArrayDataSource ti nhiu ViewController m khng cn phi implement li cc hm delegate ca TableViewDataSource. Th nhng hin ti class ny ch dng cho nhng tableview c 1 section.
Ton b code ca class ny cng nh sample bn c th tham kho ti: <a href="https://github.com/nghialv/TVDataSource">https://github.com/nghialv/TVDataSource</a></p>

<p>Hoc  s dng class ny bn c th ci qua coccoapod bng cch thm <code>pod 'TVArrayDataSource'</code> vo Podfile.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iBall game]]></title>
    <link href="http://nghialv.github.io/blog/2012/12/09/iball-game/"/>
    <updated>2012-12-09T01:17:00+09:00</updated>
    <id>http://nghialv.github.io/blog/2012/12/09/iball-game</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
</feed>
